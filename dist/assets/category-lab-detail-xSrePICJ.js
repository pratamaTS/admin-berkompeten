import{h as A,O as E,al as k,r as g,i as B,o as n,f as _,w as e,d as t,am as I,c as O,L as h,a2 as w,b as p,u as f,t as x}from"./index-AryBdys7.js";import{a as v}from"./VGrid-H4nAnDsn.js";import{b as c,V as C,a as b}from"./VCardText-Ccz8IcNf.js";import{V as M}from"./VCard-DRv5nRi-.js";import{V as N}from"./VForm-2GwK3Akv.js";import{V as P}from"./VTextField-ZuzApsZG.js";import{V as T}from"./VSwitch-BK7-Uxyt.js";import{V as S}from"./VAlert-Dclja9nK.js";import"./VCardTitle-gQEIOlk7.js";import"./VAvatar-Bk7bSWw5.js";import"./VImg-BnnpGyml.js";import"./index-DYhDWbac.js";import"./VInput-0JT9cSES.js";import"./forwardRefs-BgKS6qNZ.js";import"./easing-DY7PVvcf.js";import"./VSelectionControl-COivTBzk.js";const j={key:0,class:"text-red-500 text-sm"},z={__name:"CategoryLabDetailUpsert",setup(R){const m=A();E();const u=localStorage.getItem("id"),o=k({name:"",is_active:0}),r=k({}),y=localStorage.getItem("token"),d=g(""),l=g("");g([]);const $=async s=>{try{const a=await v.get(`https://gateway.berkompeten.com/api/admin/master/category-lab/detail?id=${s}`,{headers:{Authorization:`Bearer ${y}`}});Object.assign(o,a.data.data)}catch(a){console.error("Error fetching category lab data:",a)}},D=async()=>{try{await v({method:"post",url:"https://gateway.berkompeten.com/api/admin/master/category-lab/upsert",data:o,headers:{Authorization:`Bearer ${y}`}}),d.value="Category lab saved successfully!",setTimeout(()=>{V(),m.push("/category-lab-management")},2e3)}catch(s){console.error("Error submitting form:",s),s.response&&s.response.data?s.response.status===500?l.value=s.response.data.message||"An error occurred while saving. Please try again.":s.response.data.error?(Object.assign(r,s.response.data.message),console.log("ERROR: ",r)):l.value="An error occurred while saving. Please try again.":l.value="An error occurred while saving. Please try again."}},V=()=>{Object.assign(o,{name:"",is_active:0})};return B(()=>{u?$(u):localStorage.removeItem("id")}),(s,a)=>(n(),_(b,null,{default:e(()=>[t(c,{cols:"12"},{default:e(()=>[t(M,{title:"Category Lab Details"},{default:e(()=>[t(C,null,{default:e(()=>[t(N,{onSubmit:I(D,["prevent"])},{default:e(()=>[t(b,null,{default:e(()=>[t(c,{cols:"12"},{default:e(()=>[t(P,{modelValue:o.name,"onUpdate:modelValue":a[0]||(a[0]=i=>o.name=i),"error-messages":r.name,label:"Name"},null,8,["modelValue","error-messages"])]),_:1}),t(c,{cols:"12"},{default:e(()=>[t(T,{color:"#0080ff",modelValue:o.is_active,"onUpdate:modelValue":a[1]||(a[1]=i=>o.is_active=i),"error-messages":r.is_active,label:"Is Active"},null,8,["modelValue","error-messages"]),r.image_url?(n(),O("div",j)):h("",!0)]),_:1}),t(c,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:e(()=>[t(w,{type:"submit",color:"#0080ff"},{default:e(()=>[p("Save")]),_:1}),t(w,{onClick:V,color:"secondary",variant:"outlined"},{default:e(()=>[p("Reset")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(C,null,{default:e(()=>[f(d)?(n(),_(S,{key:0,type:"success",dismissible:"","onClick:close":a[2]||(a[2]=i=>d.value="")},{default:e(()=>[p(x(f(d)),1)]),_:1})):h("",!0),f(l)?(n(),_(S,{key:1,type:"error",dismissible:"","onClick:close":a[3]||(a[3]=i=>l.value="")},{default:e(()=>[p(x(f(l)),1)]),_:1})):h("",!0)]),_:1})]),_:1})]),_:1})]),_:1}))}},re={__name:"category-lab-detail",setup(R){const m=localStorage.getItem("token"),u=g(null),o=A();return B(async()=>{if(m)try{const r=await v.get("https://gateway.berkompeten.com/api/admin/profile",{headers:{Authorization:`Bearer ${m}`}});u.value=r.data}catch(r){r.response&&r.response.status===401&&o.push("/login")}else o.push("/login")}),(r,y)=>(n(),_(b,{class:"match-height"},{default:e(()=>[t(c,{cols:"12",md:"12"},{default:e(()=>[t(z)]),_:1})]),_:1}))}};export{re as default};

import{m as ne,V as oe,u as ue,a as $}from"./VOverlay-souyEm7B.js";import{f as L}from"./forwardRefs-BgKS6qNZ.js";import{p as U,v as j,a3 as K,r as E,a4 as re,P as A,a0 as W,a1 as p,K as I,E as q,d as i,a5 as ie,a6 as se,a7 as ce,A as de,a8 as O,a9 as fe,F as z,aa as ve}from"./index-AryBdys7.js";import{m as me,f as pe,a as ge,b as Ve}from"./VTextField-ZuzApsZG.js";import{m as ye,u as he,V as T}from"./VInput-0JT9cSES.js";import{V as Pe}from"./VChip-0NNzlpK8.js";const be=U({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...ne({origin:"center center",scrollStrategy:"block",transition:{component:oe},zIndex:2400})},"VDialog"),Ae=j()({name:"VDialog",props:be(),emits:{"update:modelValue":e=>!0},setup(e,V){let{slots:y}=V;const d=K(e,"modelValue"),{scopeId:n}=ue(),o=E();function a(s){var c,f;const u=s.relatedTarget,r=s.target;if(u!==r&&((c=o.value)!=null&&c.contentEl)&&((f=o.value)!=null&&f.globalTop)&&![document,o.value.contentEl].includes(r)&&!o.value.contentEl.contains(r)){const v=se(o.value.contentEl);if(!v.length)return;const S=v[0],k=v[v.length-1];u===S?k.focus():S.focus()}}re&&A(()=>d.value&&e.retainFocus,s=>{s?document.addEventListener("focusin",a):document.removeEventListener("focusin",a)},{immediate:!0}),A(d,async s=>{var u,r;await W(),s?(u=o.value.contentEl)==null||u.focus({preventScroll:!0}):(r=o.value.activatorEl)==null||r.focus({preventScroll:!0})});const h=p(()=>I({"aria-haspopup":"dialog","aria-expanded":String(d.value)},e.activatorProps));return q(()=>{const s=$.filterProps(e);return i($,I({ref:o,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},s,{modelValue:d.value,"onUpdate:modelValue":u=>d.value=u,"aria-modal":"true",activatorProps:h.value,role:"dialog"},n),{activator:y.activator,default:function(){for(var u=arguments.length,r=new Array(u),c=0;c<u;c++)r[c]=arguments[c];return i(ie,{root:"VDialog"},{default:()=>{var f;return[(f=y.default)==null?void 0:f.call(y,...r)]}})}})}),L({},o)}}),Ce=U({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},multiple:Boolean,showSize:{type:[Boolean,Number],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(e)},...ye({prependIcon:"$file"}),modelValue:{type:Array,default:()=>[],validator:e=>ce(e).every(V=>V!=null&&typeof V=="object")},...me({clearable:!0})},"VFileInput"),Be=j()({name:"VFileInput",inheritAttrs:!1,props:Ce(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,V){let{attrs:y,emit:d,slots:n}=V;const{t:o}=de(),a=K(e,"modelValue"),{isFocused:h,focus:s,blur:u}=he(e),r=p(()=>typeof e.showSize!="boolean"?e.showSize:void 0),c=p(()=>(a.value??[]).reduce((t,l)=>{let{size:P=0}=l;return t+P},0)),f=p(()=>O(c.value,r.value)),v=p(()=>(a.value??[]).map(t=>{const{name:l="",size:P=0}=t;return e.showSize?`${l} (${O(P,r.value)})`:l})),S=p(()=>{var l;const t=((l=a.value)==null?void 0:l.length)??0;return e.showSize?o(e.counterSizeString,t,f.value):o(e.counterString,t)}),k=E(),B=E(),g=E(),G=p(()=>h.value||e.active),R=p(()=>["plain","underlined"].includes(e.variant));function w(){var t;g.value!==document.activeElement&&((t=g.value)==null||t.focus()),h.value||s()}function H(t){D(t)}function J(t){d("mousedown:control",t)}function D(t){var l;(l=g.value)==null||l.click(),d("click:control",t)}function Q(t){t.stopPropagation(),w(),W(()=>{a.value=[],ve(e["onClick:clear"],t)})}return A(a,t=>{(!Array.isArray(t)||!t.length)&&g.value&&(g.value.value="")}),q(()=>{const t=!!(n.counter||e.counter),l=!!(t||n.details),[P,X]=fe(y),{modelValue:Ie,...Y}=T.filterProps(e),Z=pe(e);return i(T,I({ref:k,modelValue:a.value,"onUpdate:modelValue":b=>a.value=b,class:["v-file-input",{"v-file-input--chips":!!e.chips,"v-input--plain-underlined":R.value},e.class],style:e.style,"onClick:prepend":H},P,Y,{centerAffix:!R.value,focused:h.value}),{...n,default:b=>{let{id:F,isDisabled:C,isDirty:x,isReadonly:M,isValid:_}=b;return i(ge,I({ref:B,"prepend-icon":e.prependIcon,onMousedown:J,onClick:D,"onClick:clear":Q,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},Z,{id:F.value,active:G.value||x.value,dirty:x.value,disabled:C.value,focused:h.value,error:_.value===!1}),{...n,default:ee=>{var N;let{props:{class:te,...ae}}=ee;return i(z,null,[i("input",I({ref:g,type:"file",readonly:M.value,disabled:C.value,multiple:e.multiple,name:e.name,onClick:m=>{m.stopPropagation(),M.value&&m.preventDefault(),w()},onChange:m=>{if(!m.target)return;const le=m.target;a.value=[...le.files??[]]},onFocus:w,onBlur:u},ae,X),null),i("div",{class:te},[!!((N=a.value)!=null&&N.length)&&(n.selection?n.selection({fileNames:v.value,totalBytes:c.value,totalBytesReadable:f.value}):e.chips?v.value.map(m=>i(Pe,{key:m,size:"small",color:e.color},{default:()=>[m]})):v.value.join(", "))])])}})},details:l?b=>{var F,C;return i(z,null,[(F=n.details)==null?void 0:F.call(n,b),t&&i(z,null,[i("span",null,null),i(Ve,{active:!!((C=a.value)!=null&&C.length),value:S.value},n.counter)])])}:void 0})}),L({},k,B,g)}});export{Be as V,Ae as a};

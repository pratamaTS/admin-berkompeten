import{p as C,v as w,a1 as V,E as I,d as s,a2 as S,x as J,a5 as U,an as De,ao as T,a3 as A,a7 as W,ap as xe,r as _,b as B,aq as ue,ag as ce,K as x,aj as me,i as Q,a0 as Se,ar as _e,m as Ce,as as we,at as Me,k as Ae,au as Ie,l as Ye,q as Oe,s as Be,av as Ne,y as ve,aw as Te,ax as $e,ay as We,D as Ee,az as je,z as Re,ab as R,A as Ue,ac as Fe,P as L,F as He,h as ke,O as ze,al as q,o as E,f as j,w as p,am as Le,t as Z,L as ee}from"./index-VbzBk9vn.js";import{c as qe,a as K}from"./VGrid-BFbnRpDQ.js";import{b as N,V as ae,a as G}from"./VCardText-DndgDA8g.js";import{V as Ke}from"./VCard-CN-ZFMdA.js";import{V as Ge}from"./VForm-D0Ul6rtS.js";import{V as Je}from"./VMenu-W5k0Hy8m.js";import{V as Qe}from"./VTextField-D6neXmBY.js";import{V as Xe}from"./VSpacer-UYZYKbwu.js";import{M as Ze}from"./index--BNXqmfu.js";import{V as ea}from"./forwardRefs-DfCWc5Ip.js";import{V as aa}from"./VSwitch-CnMLxXKH.js";import{V as te}from"./VAlert-BRuRmKCM.js";import"./VCardTitle-BkplJ9oX.js";import"./VAvatar-Q-zZ1Ylg.js";import"./VImg-BZwaYVCB.js";import"./VOverlay-BBnn10gU.js";import"./lazy-BE80drKh.js";import"./VSelectionControl-bJ4Y4K4n.js";const fe=C({active:{type:[String,Array],default:void 0},disabled:{type:[Boolean,String,Array],default:!1},nextIcon:{type:[String],default:"$next"},prevIcon:{type:[String],default:"$prev"},modeIcon:{type:[String],default:"$subgroup"},text:String,viewMode:{type:String,default:"month"}},"VDatePickerControls"),ne=w()({name:"VDatePickerControls",props:fe(),emits:{"click:year":()=>!0,"click:month":()=>!0,"click:prev":()=>!0,"click:next":()=>!0,"click:text":()=>!0},setup(e,l){let{emit:o}=l;const a=V(()=>Array.isArray(e.disabled)?e.disabled.includes("text"):!!e.disabled),t=V(()=>Array.isArray(e.disabled)?e.disabled.includes("mode"):!!e.disabled),k=V(()=>Array.isArray(e.disabled)?e.disabled.includes("prev"):!!e.disabled),i=V(()=>Array.isArray(e.disabled)?e.disabled.includes("next"):!!e.disabled);function r(){o("click:prev")}function m(){o("click:next")}function d(){o("click:year")}function n(){o("click:month")}return I(()=>s("div",{class:["v-date-picker-controls"]},[s(S,{class:"v-date-picker-controls__month-btn",disabled:a.value,text:e.text,variant:"text",rounded:!0,onClick:n},null),s(S,{key:"mode-btn",class:"v-date-picker-controls__mode-btn",disabled:t.value,density:"comfortable",icon:e.modeIcon,variant:"text",onClick:d},null),s(Xe,{key:"mode-spacer"},null),s("div",{key:"month-buttons",class:"v-date-picker-controls__month"},[s(S,{disabled:k.value,icon:e.prevIcon,variant:"text",onClick:r},null),s(S,{disabled:i.value,icon:e.nextIcon,variant:"text",onClick:m},null)])])),{}}}),ta=C({appendIcon:String,color:String,header:String,transition:String,onClick:De()},"VDatePickerHeader"),le=w()({name:"VDatePickerHeader",props:ta(),emits:{click:()=>!0,"click:append":()=>!0},setup(e,l){let{emit:o,slots:a}=l;const{backgroundColorClasses:t,backgroundColorStyles:k}=J(e,"color");function i(){o("click")}function r(){o("click:append")}return I(()=>{const m=!!(a.default||e.header),d=!!(a.append||e.appendIcon);return s("div",{class:["v-date-picker-header",{"v-date-picker-header--clickable":!!e.onClick},t.value],style:k.value,onClick:i},[a.prepend&&s("div",{key:"prepend",class:"v-date-picker-header__prepend"},[a.prepend()]),m&&s(Ze,{key:"content",name:e.transition},{default:()=>{var n;return[s("div",{key:e.header,class:"v-date-picker-header__content"},[((n=a.default)==null?void 0:n.call(a))??e.header])]}}),d&&s("div",{class:"v-date-picker-header__append"},[a.append?s(U,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VBtn:{icon:e.appendIcon,variant:"text"}}},{default:()=>{var n;return[(n=a.append)==null?void 0:n.call(a)]}}):s(S,{key:"append-btn",icon:e.appendIcon,variant:"text",onClick:r},null)])])}),{}}}),na=C({allowedDates:[Array,Function],disabled:Boolean,displayValue:null,modelValue:Array,month:[Number,String],max:null,min:null,showAdjacentMonths:Boolean,year:[Number,String]},"calendar");function la(e){const l=T(),o=A(e,"modelValue",[],u=>W(u)),a=V(()=>e.displayValue?l.date(e.displayValue):o.value.length>0?l.date(o.value[0]):e.min?l.date(e.min):Array.isArray(e.allowedDates)?l.date(e.allowedDates[0]):l.date()),t=A(e,"year",void 0,u=>{const v=u!=null?Number(u):l.getYear(a.value);return l.startOfYear(l.setYear(l.date(),v))},u=>l.getYear(u)),k=A(e,"month",void 0,u=>{const v=u!=null?Number(u):l.getMonth(a.value),f=l.setYear(l.date(),l.getYear(t.value));return l.setMonth(f,v)},u=>l.getMonth(u)),i=V(()=>{const u=l.getWeekArray(k.value),v=u.flat(),f=6*7;if(v.length<f){const h=v[v.length-1];let c=[];for(let g=1;g<=f-v.length;g++)c.push(l.addDays(h,g)),g%7===0&&(u.push(c),c=[])}return u}),r=(u,v)=>u.map((f,h)=>{const c=l.toISO(f),g=!l.isSameMonth(f,k.value),O=l.isSameDay(f,l.startOfMonth(k.value)),Y=l.isSameDay(f,l.endOfMonth(k.value)),F=l.isSameDay(f,k.value);return{date:f,isoDate:c,formatted:l.format(f,"keyboardDate"),year:l.getYear(f),month:l.getMonth(f),isDisabled:b(f),isWeekStart:h%7===0,isWeekEnd:h%7===6,isToday:l.isSameDay(f,v),isAdjacent:g,isHidden:g&&!e.showAdjacentMonths,isStart:O,isSelected:o.value.some($=>l.isSameDay(f,$)),isEnd:Y,isSame:F,localized:l.format(f,"dayOfMonth")}}),m=V(()=>{const u=l.startOfWeek(o.value),v=[];for(let c=0;c<=6;c++)v.push(l.addDays(u,c));const f=v,h=l.date();return r(f,h)}),d=V(()=>{const u=i.value.flat(),v=l.date();return r(u,v)}),n=V(()=>i.value.map(u=>u.length?xe(l,u[0]):null));function b(u){if(e.disabled)return!0;const v=l.date(u);return e.min&&l.isAfter(l.date(e.min),v)||e.max&&l.isAfter(v,l.date(e.max))?!0:Array.isArray(e.allowedDates)&&e.allowedDates.length>0?!e.allowedDates.some(f=>l.isSameDay(l.date(f),v)):typeof e.allowedDates=="function"?!e.allowedDates(v):!1}return{displayValue:a,daysInMonth:d,daysInWeek:m,genDays:r,model:o,weeksInMonth:i,weekNumbers:n}}const he=C({color:String,hideWeekdays:Boolean,multiple:Boolean,showWeek:Boolean,...na()},"VDatePickerMonth"),se=w()({name:"VDatePickerMonth",props:he(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0},setup(e,l){let{emit:o,slots:a}=l;const t=_(),{daysInMonth:k,model:i,weekNumbers:r}=la(e),m=T();function d(n){if(e.multiple){const b=i.value.findIndex(u=>m.isSameDay(u,n));if(b===-1)i.value=[...i.value,n];else{const u=[...i.value];u.splice(b,1),i.value=u}}else i.value=[n]}return()=>s("div",{class:"v-date-picker-month"},[e.showWeek&&s("div",{key:"weeks",class:"v-date-picker-month__weeks"},[!e.hideWeekdays&&s("div",{key:"hide-week-days",class:"v-date-picker-month__day"},[B("Â ")]),r.value.map(n=>s("div",{class:["v-date-picker-month__day","v-date-picker-month__day--adjacent"]},[n]))]),s("div",{ref:t,class:"v-date-picker-month__days"},[!e.hideWeekdays&&m.getWeekdays().map(n=>s("div",{class:["v-date-picker-month__day","v-date-picker-month__weekday"]},[n[0]])),k.value.map((n,b)=>{const u={props:{onClick:()=>d(n.date)},item:n,i:b};return s("div",{class:["v-date-picker-month__day",{"v-date-picker-month__day--adjacent":n.isAdjacent,"v-date-picker-month__day--hide-adjacent":n.isHidden,"v-date-picker-month__day--selected":n.isSelected,"v-date-picker-month__day--week-end":n.isWeekEnd,"v-date-picker-month__day--week-start":n.isWeekStart}],"data-v-date":n.isDisabled?void 0:n.isoDate},[(e.showAdjacentMonths||!n.isAdjacent)&&s(U,{defaults:{VBtn:{color:(n.isSelected||n.isToday)&&!n.isDisabled?e.color:void 0,disabled:n.isDisabled,icon:!0,ripple:!1,text:n.localized,variant:n.isDisabled?"text":n.isToday&&!n.isSelected?"outlined":"flat",onClick:()=>d(n.date)}}},{default:()=>{var v;return[((v=a.day)==null?void 0:v.call(a,u))??s(S,u.props,null)]}})])})])])}}),ye=C({color:String,height:[String,Number],modelValue:Number},"VDatePickerMonths"),re=w()({name:"VDatePickerMonths",props:ye(),emits:{"update:modelValue":e=>!0},setup(e,l){let{slots:o}=l;const a=T(),t=A(e,"modelValue"),k=V(()=>{let i=a.startOfYear(a.date());return ue(12).map(r=>{const m=a.format(i,"monthShort");return i=a.getNextMonth(i),{text:m,value:r}})});return ce(()=>{t.value=t.value??a.getMonth(a.date())}),I(()=>s("div",{class:"v-date-picker-months",style:{height:me(e.height)}},[s("div",{class:"v-date-picker-months__content"},[k.value.map((i,r)=>{var n;const m={active:t.value===r,color:t.value===r?e.color:void 0,rounded:!0,text:i.text,variant:t.value===i.value?"flat":"text",onClick:()=>d(r)};function d(b){t.value=b}return((n=o.month)==null?void 0:n.call(o,{month:i,i:r,props:m}))??s(S,x({key:"month"},m,{onClick:()=>d(r)}),null)})])])),{}}}),ge=C({color:String,height:[String,Number],min:null,max:null,modelValue:Number},"VDatePickerYears"),oe=w()({name:"VDatePickerYears",props:ge(),emits:{"update:modelValue":e=>!0},setup(e,l){let{slots:o}=l;const a=T(),t=A(e,"modelValue"),k=V(()=>{const r=a.getYear(a.date());let m=r-100,d=r+52;e.min&&(m=a.getYear(a.date(e.min))),e.max&&(d=a.getYear(a.date(e.max)));let n=a.startOfYear(a.date());return n=a.setYear(n,m),ue(d-m+1,m).map(b=>{const u=a.format(n,"year");return n=a.setYear(n,a.getYear(n)+1),{text:u,value:b}})});ce(()=>{t.value=t.value??a.getYear(a.date())});const i=_();return Q(async()=>{var r;await Se(),(r=i.value)==null||r.$el.scrollIntoView({block:"center"})}),I(()=>s("div",{class:"v-date-picker-years",style:{height:me(e.height)}},[s("div",{class:"v-date-picker-years__content"},[k.value.map((r,m)=>{var n;const d={ref:t.value===r.value?i:void 0,active:t.value===r.value,color:t.value===r.value?e.color:void 0,rounded:!0,text:r.text,variant:t.value===r.value?"flat":"text",onClick:()=>t.value=r.value};return((n=o.year)==null?void 0:n.call(o,{year:r,i:m,props:d}))??s(S,x({key:"month"},d),null)})])])),{}}}),sa=qe("v-picker-title"),pe=C({color:String,..._e(),...Ce(),...we(),...Me(),...Ae(),...Ie(),...Ye(),...Oe(),...Be()},"VSheet"),ie=w()({name:"VSheet",props:pe(),setup(e,l){let{slots:o}=l;const{themeClasses:a}=Ne(e),{backgroundColorClasses:t,backgroundColorStyles:k}=J(ve(e,"color")),{borderClasses:i}=Te(e),{dimensionStyles:r}=$e(e),{elevationClasses:m}=We(e),{locationStyles:d}=Ee(e),{positionClasses:n}=je(e),{roundedClasses:b}=Re(e);return I(()=>s(e.tag,{class:["v-sheet",a.value,t.value,i.value,m.value,n.value,b.value,e.class],style:[k.value,r.value,d.value,e.style]},o)),{}}}),Ve=C({bgColor:String,landscape:Boolean,title:String,hideHeader:Boolean,...pe()},"VPicker"),de=w()({name:"VPicker",props:Ve(),setup(e,l){let{slots:o}=l;const{backgroundColorClasses:a,backgroundColorStyles:t}=J(ve(e,"color"));return I(()=>{const k=ie.filterProps(e),i=!!(e.title||o.title);return s(ie,x(k,{color:e.bgColor,class:["v-picker",{"v-picker--landscape":e.landscape,"v-picker--with-actions":!!o.actions},e.class],style:e.style}),{default:()=>{var r;return[!e.hideHeader&&s("div",{key:"header",class:[a.value],style:[t.value]},[i&&s(sa,{key:"picker-title"},{default:()=>{var m;return[((m=o.title)==null?void 0:m.call(o))??e.title]}}),o.header&&s("div",{class:"v-picker__header"},[o.header()])]),s("div",{class:"v-picker__body"},[(r=o.default)==null?void 0:r.call(o)]),o.actions&&s(U,{defaults:{VBtn:{slim:!0,variant:"text"}}},{default:()=>[s("div",{class:"v-picker__actions"},[o.actions()])]})]}})}),{}}}),ra=C({header:{type:String,default:"$vuetify.datePicker.header"},...fe(),...he(),...R(ye(),["modelValue"]),...R(ge(),["modelValue"]),...Ve({title:"$vuetify.datePicker.title"}),modelValue:null},"VDatePicker"),oa=w()({name:"VDatePicker",props:ra(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0,"update:viewMode":e=>!0},setup(e,l){let{emit:o,slots:a}=l;const t=T(),{t:k}=Ue(),i=A(e,"modelValue",void 0,y=>W(y),y=>e.multiple?y:y[0]),r=A(e,"viewMode"),m=V(()=>{var D;const y=t.date((D=i.value)==null?void 0:D[0]);return y&&t.isValid(y)?y:t.date()}),d=_(Number(e.month??t.getMonth(t.startOfMonth(m.value)))),n=_(Number(e.year??t.getYear(t.startOfYear(t.setMonth(m.value,d.value))))),b=Fe(!1),u=V(()=>e.multiple&&i.value.length>1?k("$vuetify.datePicker.itemsSelected",i.value.length):i.value[0]&&t.isValid(i.value[0])?t.format(i.value[0],"normalDateWithWeekday"):k(e.header)),v=V(()=>t.format(t.setYear(t.setMonth(t.date(),d.value),n.value),"monthAndYear")),f=V(()=>`date-picker-header${b.value?"-reverse":""}-transition`),h=V(()=>{const y=t.date(e.min);return e.min&&t.isValid(y)?y:null}),c=V(()=>{const y=t.date(e.max);return e.max&&t.isValid(y)?y:null}),g=V(()=>{if(e.disabled)return!0;const y=[];if(r.value!=="month")y.push("prev","next");else{let D=t.date();if(D=t.setYear(D,n.value),D=t.setMonth(D,d.value),h.value){const M=t.addDays(t.startOfMonth(D),-1);t.isAfter(h.value,M)&&y.push("prev")}if(c.value){const M=t.addDays(t.endOfMonth(D),1);t.isAfter(M,c.value)&&y.push("next")}}return y});function O(){d.value<11?d.value++:(n.value++,d.value=0)}function Y(){d.value>0?d.value--:(n.value--,d.value=11)}function F(){r.value="month"}function $(){r.value=r.value==="months"?"month":"months"}function X(){r.value=r.value==="year"?"month":"year"}return L(d,()=>{r.value==="months"&&$(),o("update:month",d.value)}),L(n,()=>{r.value==="year"&&X(),o("update:year",n.value)}),L(i,(y,D)=>{const M=t.date(W(y)[0]),H=t.date(W(D)[0]);b.value=t.isBefore(M,H)}),I(()=>{const y=de.filterProps(e),D=ne.filterProps(e),M=le.filterProps(e),H=se.filterProps(e),be=R(re.filterProps(e),["modelValue"]),Pe=R(oe.filterProps(e),["modelValue"]),z={header:u.value,transition:f.value};return s(de,x(y,{class:["v-date-picker",`v-date-picker--${r.value}`,{"v-date-picker--show-week":e.showWeek},e.class],style:e.style}),{title:()=>{var P;return((P=a.title)==null?void 0:P.call(a))??s("div",{class:"v-date-picker__title"},[k(e.title)])},header:()=>a.header?s(U,{defaults:{VDatePickerHeader:{...z}}},{default:()=>{var P;return[(P=a.header)==null?void 0:P.call(a,z)]}}):s(le,x({key:"header"},M,z,{onClick:r.value!=="month"?F:void 0}),{...a,default:void 0}),default:()=>s(He,null,[s(ne,x(D,{disabled:g.value,text:v.value,"onClick:next":O,"onClick:prev":Y,"onClick:month":$,"onClick:year":X}),null),s(ea,{hideOnLeave:!0},{default:()=>[r.value==="months"?s(re,x({key:"date-picker-months"},be,{modelValue:d.value,"onUpdate:modelValue":P=>d.value=P,min:h.value,max:c.value}),null):r.value==="year"?s(oe,x({key:"date-picker-years"},Pe,{modelValue:n.value,"onUpdate:modelValue":P=>n.value=P,min:h.value,max:c.value}),null):s(se,x({key:"date-picker-month"},H,{modelValue:i.value,"onUpdate:modelValue":P=>i.value=P,month:d.value,"onUpdate:month":P=>d.value=P,year:n.value,"onUpdate:year":P=>n.value=P,min:h.value,max:c.value}),null)]})]),actions:a.actions})}),{}}}),ia={__name:"ExamDateDetailUpsert",setup(e){const l=ke();ze();const o=localStorage.getItem("id"),a=q({date:new Date().toISOString().substr(0,10),is_active:!1}),t=q({}),k=localStorage.getItem("token"),i=_(""),r=_(""),m=_(!1),d=q(new Date().toISOString().substr(0,10)),n=_(null),b=async h=>{try{const c=await K.get(`https://gateway.berkompeten.com/api/admin/master/exam-date/detail?id=${h}`,{headers:{Authorization:`Bearer ${k}`}});if(Object.assign(a,c.data.data),a.date){const g=new Date(a.date);d.value=g.toISOString().substr(0,10),n.value=g.toISOString().substr(11,5)}}catch(c){console.error("Error fetching exam date data:",c),r.value="Failed to fetch exam date data."}},u=async()=>{try{f(),await K({method:"post",url:"https://gateway.berkompeten.com/api/admin/master/exam-date/upsert",data:a,headers:{Authorization:`Bearer ${k}`}}),i.value="Exam Date saved successfully!",setTimeout(()=>{v(),l.push("/exam-date-management")},2e3)}catch(h){console.error("Error submitting form:",h),h.response&&h.response.data?h.response.status===500?r.value=h.response.data.message||"An error occurred while saving. Please try again.":h.response.data.error?Object.assign(t,h.response.data.message):r.value="An error occurred while saving. Please try again.":r.value="An error occurred while saving. Please try again."}},v=()=>{Object.assign(a,{date:new Date().toISOString().substr(0,10),is_active:!1}),d.value=new Date().toISOString().substr(0,10),n.value=null,t.value={},i.value="",r.value=""},f=()=>{console.log(`Saving date and time: ${a.date}`)};return Q(()=>{o?b(o):localStorage.removeItem("id")}),(h,c)=>(E(),j(G,null,{default:p(()=>[s(N,{cols:"12"},{default:p(()=>[s(Ke,{title:"Exam Date Details"},{default:p(()=>[s(ae,null,{default:p(()=>[s(Ge,{onSubmit:Le(u,["prevent"])},{default:p(()=>[s(G,null,{default:p(()=>[s(N,{cols:"12"},{default:p(()=>[s(Je,{modelValue:m.value,"onUpdate:modelValue":c[4]||(c[4]=g=>m.value=g),"close-on-content-click":!1,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"auto",activator:"parent"},{activator:p(({on:g,attrs:O})=>[s(Qe,x({modelValue:a.date,"onUpdate:modelValue":c[0]||(c[0]=Y=>a.date=Y),label:"Date",readonly:""},O,{onClick:c[1]||(c[1]=Y=>m.value.value=!0),"error-messages":t.date}),null,16,["modelValue","error-messages"])]),default:p(()=>[s(oa,{modelValue:d.value,"onUpdate:modelValue":c[2]||(c[2]=g=>d.value=g),"no-title":"",scrollable:"",onChange:c[3]||(c[3]=g=>{m.value.value=!1,f()})},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),s(N,{cols:"12"},{default:p(()=>[s(aa,{color:"#0080ff",modelValue:a.is_active,"onUpdate:modelValue":c[5]||(c[5]=g=>a.is_active=g),"error-messages":t.is_active,label:"Is Active"},null,8,["modelValue","error-messages"])]),_:1}),s(N,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:p(()=>[s(S,{type:"submit",color:"#0080ff"},{default:p(()=>[B("Save")]),_:1}),s(S,{onClick:v,color:"secondary",variant:"outlined"},{default:p(()=>[B("Reset")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),s(ae,null,{default:p(()=>[i.value?(E(),j(te,{key:0,type:"success",dismissible:"","onClick:close":c[6]||(c[6]=g=>i.value="")},{default:p(()=>[B(Z(i.value),1)]),_:1})):ee("",!0),r.value?(E(),j(te,{key:1,type:"error",dismissible:"","onClick:close":c[7]||(c[7]=g=>r.value="")},{default:p(()=>[B(Z(r.value),1)]),_:1})):ee("",!0)]),_:1})]),_:1})]),_:1})]),_:1}))}},Ca={__name:"exam-date-detail",setup(e){const l=localStorage.getItem("token"),o=_(null),a=ke();return Q(async()=>{if(l)try{const t=await K.get("https://gateway.berkompeten.com/api/admin/profile",{headers:{Authorization:`Bearer ${l}`}});o.value=t.data}catch(t){t.response&&t.response.status===401&&a.push("/login")}else a.push("/login")}),(t,k)=>(E(),j(G,{class:"match-height"},{default:p(()=>[s(N,{cols:"12",md:"12"},{default:p(()=>[s(ia)]),_:1})]),_:1}))}};export{Ca as default};

import{a as D}from"./VGrid-Cc9xDJ2L.js";import{p as $,m as j,j as G,l as M,B as z,d as o,a1 as W,a2 as X,i as Z,k as ee,q as ae,s as L,a3 as te,a4 as le,v as oe,a5 as se,a6 as ne,a7 as B,a0 as k,a8 as re,a9 as q,aa as A,f as y,ab as ue,N,g as F,Y as ie,ac as ce,ad as de,ae as ve,af as me,G as ge,ag as fe,_ as he,u as J,o as T,c as R,w as m,b as S,a as c,ah as w,e as H,t as P,J as E,F as pe,ai as be,V as U,Q as _e,R as ye}from"./index-BOG201kq.js";import{V as ke}from"./forwardRefs-BpzAAnfm.js";import{V as xe}from"./VImg-DAaXXU5K.js";import{u as Ve}from"./ssrBoot-BXbWiMUv.js";import{V as Se}from"./VTextField-DMfMzZ70.js";import{V as Q}from"./VAlert-CsF9NLAL.js";import{V as Te,a as Be,b as Pe}from"./VCardText-CI-HyNsl.js";import{V as Ce}from"./VTable-Dd6RVhPG.js";import"./index-B3ZOUsAr.js";const Ie=$({text:String,...j(),...G()},"VToolbarTitle"),O=M()({name:"VToolbarTitle",props:Ie(),setup(e,g){let{slots:a}=g;return z(()=>{const i=!!(a.default||a.text||e.text);return o(e.tag,{class:["v-toolbar-title",e.class],style:e.style},{default:()=>{var l;return[i&&o("div",{class:"v-toolbar-title__placeholder"},[a.text?a.text():e.text,(l=a.default)==null?void 0:l.call(a)])]}})}),{}}}),we=[null,"prominent","default","comfortable","compact"],K=$({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>we.includes(e)},extended:Boolean,extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...W(),...j(),...X(),...Z(),...G({tag:"header"}),...ee()},"VToolbar"),Y=M()({name:"VToolbar",props:K(),setup(e,g){var u;let{slots:a}=g;const{backgroundColorClasses:i,backgroundColorStyles:l}=ae(L(e,"color")),{borderClasses:s}=te(e),{elevationClasses:r}=le(e),{roundedClasses:f}=oe(e),{themeClasses:h}=se(e),{rtlClasses:p}=ne(),d=B(!!(e.extended||(u=a.extension)!=null&&u.call(a))),x=k(()=>parseInt(Number(e.height)+(e.density==="prominent"?Number(e.height):0)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0),10)),b=k(()=>d.value?parseInt(Number(e.extensionHeight)+(e.density==="prominent"?Number(e.extensionHeight):0)-(e.density==="comfortable"?4:0)-(e.density==="compact"?8:0),10):0);return re({VBtn:{variant:"text"}}),z(()=>{var t;const V=!!(e.title||a.title),v=!!(a.image||e.image),n=(t=a.extension)==null?void 0:t.call(a);return d.value=!!(e.extended||n),o(e.tag,{class:["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},i.value,s.value,r.value,f.value,h.value,p.value,e.class],style:[l.value,e.style]},{default:()=>[v&&o("div",{key:"image",class:"v-toolbar__image"},[a.image?o(q,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},a.image):o(xe,{key:"image-img",cover:!0,src:e.image},null)]),o(q,{defaults:{VTabs:{height:A(x.value)}}},{default:()=>{var _,C,I;return[o("div",{class:"v-toolbar__content",style:{height:A(x.value)}},[a.prepend&&o("div",{class:"v-toolbar__prepend"},[(_=a.prepend)==null?void 0:_.call(a)]),V&&o(O,{key:"title",text:e.title},{text:a.title}),(C=a.default)==null?void 0:C.call(a),a.append&&o("div",{class:"v-toolbar__append"},[(I=a.append)==null?void 0:I.call(a)])])]}}),o(q,{defaults:{VTabs:{height:A(b.value)}}},{default:()=>[o(ke,null,{default:()=>[d.value&&o("div",{class:"v-toolbar__extension",style:{height:A(b.value)}},[n])]})]})]})}),{contentHeight:x,extensionHeight:b}}}),Ne=$({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function Ae(e){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:a}=g;let i=0;const l=y(null),s=B(0),r=B(0),f=B(0),h=B(!1),p=B(!1),d=k(()=>Number(e.scrollThreshold)),x=k(()=>ue((d.value-s.value)/d.value||0)),b=()=>{const u=l.value;!u||a&&!a.value||(i=s.value,s.value="window"in u?u.pageYOffset:u.scrollTop,p.value=s.value<i,f.value=Math.abs(s.value-d.value))};return N(p,()=>{r.value=r.value||s.value}),N(h,()=>{r.value=0}),F(()=>{N(()=>e.scrollTarget,u=>{var v;const V=u?document.querySelector(u):window;V&&V!==l.value&&((v=l.value)==null||v.removeEventListener("scroll",b),l.value=V,l.value.addEventListener("scroll",b,{passive:!0}))},{immediate:!0})}),ie(()=>{var u;(u=l.value)==null||u.removeEventListener("scroll",b)}),a&&N(a,b,{immediate:!0}),{scrollThreshold:d,currentScroll:s,currentThreshold:f,isScrollActive:h,scrollRatio:x,isScrollingUp:p,savedScroll:r}}const Re=$({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...K(),...ce(),...Ne(),height:{type:[Number,String],default:64}},"VAppBar"),$e=M()({name:"VAppBar",props:Re(),emits:{"update:modelValue":e=>!0},setup(e,g){let{slots:a}=g;const i=y(),l=de(e,"modelValue"),s=k(()=>{var _;const t=new Set(((_=e.scrollBehavior)==null?void 0:_.split(" "))??[]);return{hide:t.has("hide"),inverted:t.has("inverted"),collapse:t.has("collapse"),elevate:t.has("elevate"),fadeImage:t.has("fade-image")}}),r=k(()=>{const t=s.value;return t.hide||t.inverted||t.collapse||t.elevate||t.fadeImage||!l.value}),{currentScroll:f,scrollThreshold:h,isScrollingUp:p,scrollRatio:d}=Ae(e,{canScroll:r}),x=k(()=>e.collapse||s.value.collapse&&(s.value.inverted?d.value>0:d.value===0)),b=k(()=>e.flat||s.value.elevate&&(s.value.inverted?f.value>0:f.value===0)),u=k(()=>s.value.fadeImage?s.value.inverted?1-d.value:d.value:void 0),V=k(()=>{var C,I;if(s.value.hide&&s.value.inverted)return 0;const t=((C=i.value)==null?void 0:C.contentHeight)??0,_=((I=i.value)==null?void 0:I.extensionHeight)??0;return t+_});ve(k(()=>!!e.scrollBehavior),()=>{fe(()=>{s.value.hide?s.value.inverted?l.value=f.value>h.value:l.value=p.value||f.value<h.value:l.value=!0})});const{ssrBootStyles:v}=Ve(),{layoutItemStyles:n}=me({id:e.name,order:k(()=>parseInt(e.order,10)),position:L(e,"location"),layoutSize:V,elementSize:B(void 0),active:l,absolute:L(e,"absolute")});return z(()=>{const t=Y.filterProps(e);return o(Y,ge({ref:i,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...n.value,"--v-toolbar-image-opacity":u.value,height:void 0,...v.value},e.style]},t,{collapse:x.value,flat:b.value}),a)}),{}}}),qe=e=>(_e("data-v-c5a5a850"),e=e(),ye(),e),Ee={class:"table-header"},De={class:"table-container"},Le=qe(()=>c("thead",null,[c("tr",null,[c("th",null,"ID"),c("th",null,"Packet Name"),c("th",null,"Is Active"),c("th",null,"Created Date"),c("th",null,"Actions")])],-1)),He={key:0},Me={class:"pagination"},ze={__name:"QuestionPacketList",setup(e){const g=J(),a=localStorage.getItem("token"),i=y([]),l=y(""),s=y(null);y([]);const r=y({current_page:1,from:1,last_page:1,next_page_url:null,prev_page_url:null,total:0});y(!1),y(null);const f=y(""),h=y(""),p=async(v=1,n="")=>{try{let t=`https://gateway.berkompeten.com/api/admin/master/question-packet?page=${v}`;n&&(t+=`&search=${n.toLowerCase()}`);const _=await D.get(t,{headers:{Authorization:`Bearer ${a}`}});i.value=_.data.data.data,r.value=_.data.data}catch(t){console.log("err: ",t),t.response&&t.response.status===401&&(localStorage.removeItem("token"),g.push("/login"))}};N([l],([v])=>{p(1,v)});const d=()=>{r.value.next_page_url&&p(r.value.current_page+1,questionPacketId,l.value)},x=()=>{s.value&&(questionPacketId=s.value),r.value.prev_page_url&&p(r.value.current_page-1,questionPacketId,l.value)},b=()=>{localStorage.removeItem("id"),g.push("/question-packet/detail")},u=v=>{localStorage.setItem("id",v),g.push("/question-packet/detail")},V=async v=>{try{const n=await D.delete(`https://gateway.berkompeten.com/api/admin/master/question-packet?question_packet_id=${v}`,{headers:{Authorization:`Bearer ${a}`}});f.value=n.data.message,p(r.value.current_page)}catch(n){console.log("Error: ",n),n.response&&n.response.data?h.value=n.response.data.message||"An error occurred while deleting. Please try again.":h.value="An error occurred while deleting. Please try again."}};return F(()=>{p()}),(v,n)=>(T(),R("div",null,[o($e,{app:"",color:"#0080ff",dark:""},{default:m(()=>[o(O,null,{default:m(()=>[S("Question Packet Management")]),_:1})]),_:1}),c("div",Ee,[o(Se,{modelValue:l.value,"onUpdate:modelValue":n[0]||(n[0]=t=>l.value=t),label:"Search",class:"mx-3",solo:""},null,8,["modelValue"]),o(w,{color:"#0080ff",class:"mx-1",onClick:b},{default:m(()=>[S("Create")]),_:1})]),o(Te,null,{default:m(()=>[f.value?(T(),H(Q,{key:0,type:"success",dismissible:"","onClick:close":n[1]||(n[1]=t=>f.value="")},{default:m(()=>[S(P(f.value),1)]),_:1})):E("",!0),h.value?(T(),H(Q,{key:1,type:"error",dismissible:"","onClick:close":n[2]||(n[2]=t=>h.value="")},{default:m(()=>[S(P(h.value),1)]),_:1})):E("",!0)]),_:1}),c("div",De,[o(Ce,{"fixed-header":""},{default:m(()=>[Le,c("tbody",null,[(T(!0),R(pe,null,be(i.value,t=>(T(),R("tr",{key:t.id},[c("td",null,P(t.id),1),c("td",null,P(t.name),1),c("td",null,P(t.is_active),1),c("td",null,P(t.created_date),1),c("td",null,[t.is_used===!1?(T(),R("div",He,[o(w,{icon:"",onClick:_=>u(t.id),class:"mx-1",color:"transparent",style:{padding:"0",border:"none","background-color":"transparent","box-shadow":"none"}},{default:m(()=>[o(U,{style:{color:"orange"}},{default:m(()=>[S("ri-edit-line")]),_:1})]),_:2},1032,["onClick"]),o(w,{icon:"",onClick:_=>V(t.id),class:"mx-1",color:"transparent",style:{padding:"0",border:"none","background-color":"transparent","box-shadow":"none"}},{default:m(()=>[o(U,{style:{color:"red"}},{default:m(()=>[S("ri-delete-bin-line")]),_:1})]),_:2},1032,["onClick"])])):E("",!0)])]))),128))])]),_:1})]),c("div",Me,[o(w,{onClick:x,disabled:!r.value.prev_page_url,class:"mx-1",color:"#0080ff"},{default:m(()=>[S("Previous")]),_:1},8,["disabled"]),o(w,{onClick:d,disabled:!r.value.next_page_url,class:"mx-1",color:"#0080ff"},{default:m(()=>[S("Next")]),_:1},8,["disabled"])])]))}},Fe=he(ze,[["__scopeId","data-v-c5a5a850"]]),Ze={__name:"question-packet-management",setup(e){const g=localStorage.getItem("token"),a=y(null),i=J();return F(async()=>{if(g)try{const l=await D.get("https://gateway.berkompeten.com/api/admin/profile",{headers:{Authorization:`Bearer ${g}`}});a.value=l.data}catch(l){l.response&&l.response.status===401&&i.push("/login")}else i.push("/login")}),(l,s)=>(T(),H(Be,{class:"match-height"},{default:m(()=>[o(Pe,{cols:"12",md:"12"},{default:m(()=>[o(Fe)]),_:1})]),_:1}))}};export{Ze as default};

import{h as C,O as E,al as k,r as g,i as B,o as n,f as _,w as e,d as t,am as I,c as O,L as h,a2 as w,b as p,u as f,t as x}from"./index-VbzBk9vn.js";import{a as v}from"./VGrid-BFbnRpDQ.js";import{b as c,V as S,a as V}from"./VCardText-DndgDA8g.js";import{V as T}from"./VCard-CN-ZFMdA.js";import{V as M}from"./VForm-D0Ul6rtS.js";import{V as P}from"./VTextField-D6neXmBY.js";import{V as j}from"./VSwitch-CnMLxXKH.js";import{V as A}from"./VAlert-BRuRmKCM.js";import"./VCardTitle-BkplJ9oX.js";import"./VAvatar-Q-zZ1Ylg.js";import"./VImg-BZwaYVCB.js";import"./index--BNXqmfu.js";import"./forwardRefs-DfCWc5Ip.js";import"./VSelectionControl-bJ4Y4K4n.js";const z={key:0,class:"text-red-500 text-sm"},F={__name:"SystemDetailUpsert",setup(R){const m=C();E();const u=localStorage.getItem("id"),r=k({topic:"",is_active:0}),a=k({}),y=localStorage.getItem("token"),d=g(""),l=g("");g([]);const $=async o=>{try{const s=await v.get(`https://gateway.berkompeten.com/api/admin/master/system/detail?id=${o}`,{headers:{Authorization:`Bearer ${y}`}});Object.assign(r,s.data.data)}catch(s){console.error("Error fetching system data:",s)}},D=async()=>{try{await v({method:"post",url:"https://gateway.berkompeten.com/api/admin/master/system/upsert",data:r,headers:{Authorization:`Bearer ${y}`}}),d.value="System saved successfully!",setTimeout(()=>{b(),m.push("/system-management")},2e3)}catch(o){console.error("Error submitting form:",o),o.response&&o.response.data?o.response.status===500?l.value=o.response.data.message||"An error occurred while saving. Please try again.":o.response.data.error?(Object.assign(a,o.response.data.message),console.log("ERROR: ",a)):l.value="An error occurred while saving. Please try again.":l.value="An error occurred while saving. Please try again."}},b=()=>{Object.assign(r,{topic:"",is_active:0})};return B(()=>{u?$(u):localStorage.removeItem("id")}),(o,s)=>(n(),_(V,null,{default:e(()=>[t(c,{cols:"12"},{default:e(()=>[t(T,{title:"System Details"},{default:e(()=>[t(S,null,{default:e(()=>[t(M,{onSubmit:I(D,["prevent"])},{default:e(()=>[t(V,null,{default:e(()=>[t(c,{cols:"12"},{default:e(()=>[t(P,{modelValue:r.topic,"onUpdate:modelValue":s[0]||(s[0]=i=>r.topic=i),"error-messages":a.topic,label:"Topic"},null,8,["modelValue","error-messages"])]),_:1}),t(c,{cols:"12"},{default:e(()=>[t(j,{color:"#0080ff",modelValue:r.is_active,"onUpdate:modelValue":s[1]||(s[1]=i=>r.is_active=i),"error-messages":a.is_active,label:"Is Active"},null,8,["modelValue","error-messages"]),a.image_url?(n(),O("div",z)):h("",!0)]),_:1}),t(c,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:e(()=>[t(w,{type:"submit",color:"#0080ff"},{default:e(()=>[p("Save")]),_:1}),t(w,{onClick:b,color:"secondary",variant:"outlined"},{default:e(()=>[p("Reset")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(S,null,{default:e(()=>[f(d)?(n(),_(A,{key:0,type:"success",dismissible:"","onClick:close":s[2]||(s[2]=i=>d.value="")},{default:e(()=>[p(x(f(d)),1)]),_:1})):h("",!0),f(l)?(n(),_(A,{key:1,type:"error",dismissible:"","onClick:close":s[3]||(s[3]=i=>l.value="")},{default:e(()=>[p(x(f(l)),1)]),_:1})):h("",!0)]),_:1})]),_:1})]),_:1})]),_:1}))}},te={__name:"system-detail",setup(R){const m=localStorage.getItem("token"),u=g(null),r=C();return B(async()=>{if(m)try{const a=await v.get("https://gateway.berkompeten.com/api/admin/profile",{headers:{Authorization:`Bearer ${m}`}});u.value=a.data}catch(a){a.response&&a.response.status===401&&r.push("/login")}else r.push("/login")}),(a,y)=>(n(),_(V,{class:"match-height"},{default:e(()=>[t(c,{cols:"12",md:"12"},{default:e(()=>[t(F)]),_:1})]),_:1}))}};export{te as default};

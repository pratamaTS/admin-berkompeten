import{p as ne,I as Ae,m as Fe,$ as Ee,a3 as Re,a4 as De,h as Te,a5 as Ue,i as $e,j as ze,k as Ne,a6 as Oe,l as re,a7 as Z,W as I,a0 as Me,a8 as Ge,a1 as Le,a9 as je,aa as He,A as Qe,ab as Je,v as We,y as Xe,s as Ze,x as Ke,d as t,ac as Ye,V as K,ad as fe,Z as j,G as L,ae as et,f as V,af as tt,B as ke,ag as xe,F as W,ah as at,ai as ot,aj as lt,ak as st,g as ie,N as M,al as nt,D as ve,am as rt,X as it,an as ae,ao as ut,a2 as ct,ap as dt,u as we,M as mt,aq as ge,o as G,e as X,w as r,a as O,H as z,c as pe,t as oe,J as Q,ar as ft,b as J}from"./index-3zjSl10J.js";import{a as _e}from"./avatar-1-BeeGmpGQ.js";import{a as N}from"./VGrid-CSSzMaaB.js";import{V as f}from"./VCol-oNScIwzW.js";import{V as vt,a as le,b as gt}from"./VForm-6dLdKGZO.js";import{c as pt,a as _t,f as yt,V as Vt}from"./forwardRefs-BJiYyVSU.js";import{V as bt}from"./lazy-BHNoIRKO.js";import{V as se}from"./VRow-D9jpOeoN.js";import{V as ye}from"./VSelect-ByAqds1t.js";import{m as Ce,u as Pe,a as Y,b as ht,f as kt,c as xt,d as wt,V as T}from"./VTextField-DIOBComm.js";import{I as Ct}from"./VImg-3UcRuBQ4.js";import{m as Pt,V as Ve}from"./VCheckboxBtn-DJ84BFHn.js";import"./VMenu-Buh32mfO.js";const St=pt("v-alert-title"),qt=["success","info","warning","error"],It=ne({border:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["top","end","bottom","start"].includes(e)},borderColor:String,closable:Boolean,closeIcon:{type:Ae,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:e=>qt.includes(e)},...Fe(),...Ee(),...Re(),...De(),...Te(),...Ue(),...$e(),...ze(),...Ne(),...Oe({variant:"flat"})},"VAlert"),be=re()({name:"VAlert",props:It(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0},setup(e,w){let{emit:p,slots:n}=w;const c=Z(e,"modelValue"),a=I(()=>{if(e.icon!==!1)return e.type?e.icon??`$${e.type}`:e.icon}),i=I(()=>({color:e.color??e.type,variant:e.variant})),{themeClasses:_}=Me(e),{colorClasses:A,colorStyles:U,variantClasses:b}=Ge(i),{densityClasses:h}=Le(e),{dimensionStyles:F}=je(e),{elevationClasses:C}=He(e),{locationStyles:B}=Qe(e),{positionClasses:P}=Je(e),{roundedClasses:S}=We(e),{textColorClasses:y,textColorStyles:q}=Xe(Ze(e,"borderColor")),{t:$}=Ke(),s=I(()=>({"aria-label":$(e.closeLabel),onClick(o){c.value=!1,p("click:close",o)}}));return()=>{const o=!!(n.prepend||a.value),l=!!(n.title||e.title),v=!!(n.close||e.closable);return c.value&&t(e.tag,{class:["v-alert",e.border&&{"v-alert--border":!!e.border,[`v-alert--border-${e.border===!0?"start":e.border}`]:!0},{"v-alert--prominent":e.prominent},_.value,A.value,h.value,C.value,P.value,S.value,b.value,e.class],style:[U.value,F.value,B.value,e.style],role:"alert"},{default:()=>{var E,k;return[Ye(!1,"v-alert"),e.border&&t("div",{key:"border",class:["v-alert__border",y.value],style:q.value},null),o&&t("div",{key:"prepend",class:"v-alert__prepend"},[n.prepend?t(fe,{key:"prepend-defaults",disabled:!a.value,defaults:{VIcon:{density:e.density,icon:a.value,size:e.prominent?44:28}}},n.prepend):t(K,{key:"prepend-icon",density:e.density,icon:a.value,size:e.prominent?44:28},null)]),t("div",{class:"v-alert__content"},[l&&t(St,{key:"title"},{default:()=>{var d;return[((d=n.title)==null?void 0:d.call(n))??e.title]}}),((E=n.text)==null?void 0:E.call(n))??e.text,(k=n.default)==null?void 0:k.call(n)]),n.append&&t("div",{key:"append",class:"v-alert__append"},[n.append()]),v&&t("div",{key:"close",class:"v-alert__close"},[n.close?t(fe,{key:"close-defaults",defaults:{VBtn:{icon:e.closeIcon,size:"x-small",variant:"text"}}},{default:()=>{var d;return[(d=n.close)==null?void 0:d.call(n,{props:s.value})]}}):t(j,L({key:"close-btn",icon:e.closeIcon,size:"x-small",variant:"text"},s.value),null)])]}})}}}),Bt=ne({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...Ce(),...Pt()},"VSwitch"),At=re()({name:"VSwitch",inheritAttrs:!1,props:Bt(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,w){let{attrs:p,slots:n}=w;const c=Z(e,"indeterminate"),a=Z(e,"modelValue"),{loaderClasses:i}=et(e),{isFocused:_,focus:A,blur:U}=Pe(e),b=V(),h=I(()=>typeof e.loading=="string"&&e.loading!==""?e.loading:e.color),F=tt(),C=I(()=>e.id||`switch-${F}`);function B(){c.value&&(c.value=!1)}function P(S){var y,q;S.stopPropagation(),S.preventDefault(),(q=(y=b.value)==null?void 0:y.input)==null||q.click()}return ke(()=>{const[S,y]=xe(p),q=Y.filterProps(e),$=Ve.filterProps(e);return t(Y,L({class:["v-switch",{"v-switch--inset":e.inset},{"v-switch--indeterminate":c.value},i.value,e.class]},S,q,{modelValue:a.value,"onUpdate:modelValue":s=>a.value=s,id:C.value,focused:_.value,style:e.style}),{...n,default:s=>{let{id:o,messagesId:l,isDisabled:v,isReadonly:E,isValid:k}=s;return t(Ve,L({ref:b},$,{modelValue:a.value,"onUpdate:modelValue":[d=>a.value=d,B],id:o.value,"aria-describedby":l.value,type:"checkbox","aria-checked":c.value?"mixed":void 0,disabled:v.value,readonly:E.value,onFocus:A,onBlur:U},y),{...n,default:d=>{let{backgroundColorClasses:u,backgroundColorStyles:m}=d;return t("div",{class:["v-switch__track",...u.value],style:m.value,onClick:P},null)},input:d=>{let{inputNode:u,icon:m,backgroundColorClasses:g,backgroundColorStyles:x}=d;return t(W,null,[u,t("div",{class:["v-switch__thumb",{"v-switch__thumb--filled":m||e.loading},e.inset?void 0:g.value],style:e.inset?void 0:x.value},[t(_t,null,{default:()=>[e.loading?t(at,{name:"v-switch",active:!0,color:k.value===!1?void 0:h.value},{default:R=>n.loader?n.loader(R):t(ot,{active:R.isActive,color:R.color,indeterminate:!0,size:"16",width:"2"},null)}):m&&t(K,{key:m,icon:m,size:"x-small"},null)]})])])}})}})}),{}}}),Ft=ne({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...Ce(),...ht()},"VTextarea"),he=re()({name:"VTextarea",directives:{Intersect:Ct},inheritAttrs:!1,props:Ft(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,w){let{attrs:p,emit:n,slots:c}=w;const a=Z(e,"modelValue"),{isFocused:i,focus:_,blur:A}=Pe(e),U=I(()=>typeof e.counterValue=="function"?e.counterValue(a.value):(a.value||"").toString().length),b=I(()=>{if(p.maxlength)return p.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function h(u,m){var g,x;!e.autofocus||!u||(x=(g=m[0].target)==null?void 0:g.focus)==null||x.call(g)}const F=V(),C=V(),B=lt(""),P=V(),S=I(()=>e.persistentPlaceholder||i.value||e.active);function y(){var u;P.value!==document.activeElement&&((u=P.value)==null||u.focus()),i.value||_()}function q(u){y(),n("click:control",u)}function $(u){n("mousedown:control",u)}function s(u){u.stopPropagation(),y(),ae(()=>{a.value="",ut(e["onClick:clear"],u)})}function o(u){var g;const m=u.target;if(a.value=m.value,(g=e.modelModifiers)!=null&&g.trim){const x=[m.selectionStart,m.selectionEnd];ae(()=>{m.selectionStart=x[0],m.selectionEnd=x[1]})}}const l=V(),v=V(+e.rows),E=I(()=>["plain","underlined"].includes(e.variant));st(()=>{e.autoGrow||(v.value=+e.rows)});function k(){e.autoGrow&&ae(()=>{if(!l.value||!C.value)return;const u=getComputedStyle(l.value),m=getComputedStyle(C.value.$el),g=parseFloat(u.getPropertyValue("--v-field-padding-top"))+parseFloat(u.getPropertyValue("--v-input-padding-top"))+parseFloat(u.getPropertyValue("--v-field-padding-bottom")),x=l.value.scrollHeight,R=parseFloat(u.lineHeight),ee=Math.max(parseFloat(e.rows)*R+g,parseFloat(m.getPropertyValue("--v-input-control-height"))),te=parseFloat(e.maxRows)*R+g||1/0,D=dt(x??0,ee,te);v.value=Math.floor((D-g)/R),B.value=ct(D)})}ie(k),M(a,k),M(()=>e.rows,k),M(()=>e.maxRows,k),M(()=>e.density,k);let d;return M(l,u=>{u?(d=new ResizeObserver(k),d.observe(l.value)):d==null||d.disconnect()}),nt(()=>{d==null||d.disconnect()}),ke(()=>{const u=!!(c.counter||e.counter||e.counterValue),m=!!(u||c.details),[g,x]=xe(p),{modelValue:R,...ee}=Y.filterProps(e),te=kt(e);return t(Y,L({ref:F,modelValue:a.value,"onUpdate:modelValue":D=>a.value=D,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-input--plain-underlined":E.value},e.class],style:e.style},g,ee,{centerAffix:v.value===1&&!E.value,focused:i.value}),{...c,default:D=>{let{id:H,isDisabled:ue,isDirty:ce,isReadonly:Se,isValid:qe}=D;return t(xt,L({ref:C,style:{"--v-textarea-control-height":B.value},onClick:q,onMousedown:$,"onClick:clear":s,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},te,{id:H.value,active:S.value||ce.value,centerAffix:v.value===1&&!E.value,dirty:ce.value||e.dirty,disabled:ue.value,focused:i.value,error:qe.value===!1}),{...c,default:Ie=>{let{props:{class:de,...me}}=Ie;return t(W,null,[e.prefix&&t("span",{class:"v-text-field__prefix"},[e.prefix]),ve(t("textarea",L({ref:P,class:de,value:a.value,onInput:o,autofocus:e.autofocus,readonly:Se.value,disabled:ue.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:y,onBlur:A},me,x),null),[[rt("intersect"),{handler:h},null,{once:!0}]]),e.autoGrow&&ve(t("textarea",{class:[de,"v-textarea__sizer"],id:`${me.id}-sizer`,"onUpdate:modelValue":Be=>a.value=Be,ref:l,readonly:!0,"aria-hidden":"true"},null),[[it,a.value]]),e.suffix&&t("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:m?D=>{var H;return t(W,null,[(H=c.details)==null?void 0:H.call(c,D),u&&t(W,null,[t("span",null,null),t(wt,{active:e.persistentCounter||i.value,value:U.value,max:b.value},c.counter)])])}:void 0})}),yt({},F,C,P)}}),Et={class:"d-flex flex-column justify-center gap-5"},Rt={class:"d-flex flex-wrap gap-2"},Dt=O("span",{class:"d-none d-sm-block"},"Upload new photo",-1),Tt=O("span",{class:"d-none d-sm-block"},"Reset",-1),Ut=O("p",{class:"text-body-1 mb-0"},"Allowed JPG, GIF or PNG. Max size of 2048MB",-1),$t={key:0,class:"text-red-500 text-sm"},zt={style:{color:"red"}},Nt={key:0,class:"text-red-500 text-sm"},Ot={__name:"QuestionDetailUpsert",setup(e){const w=we();mt();const p=localStorage.getItem("question_packet_id"),n=V([]),c=V([]),a=ge({image_url:_e,question_packet_id:"",subtopic_list_id:"",scenario:"",question:"",option_a:"",option_b:"",option_c:"",option_d:"",option_e:"",correct_answer:"",image_url:"",discussion:"",is_active:0}),i=ge({}),_=localStorage.getItem("token"),A=V(null),U=I(()=>a.image_url||_e),b=V(""),h=V(""),F=async s=>{try{const o=await N.get(`https://gateway.berkompeten.com/api/admin/master/question/detail?id=${s}`,{headers:{Authorization:`Bearer ${_}`}});Object.assign(a,o.data.data)}catch(o){console.error("Error fetching question data:",o)}},C=async()=>{try{await N({method:"post",url:"https://gateway.berkompeten.com/api/admin/master/question/upsert",data:a,headers:{Authorization:`Bearer ${_}`}}),b.value="Question saved successfully!",setTimeout(()=>{localStorage.removeItem("question_packet_id"),B(),w.push("/question-management")},2e3)}catch(s){console.error("Error submitting form:",s),s.response&&s.response.data&&s.response.data.error?(Object.assign(i,s.response.data.message),console.log("ERROR: ",i)):h.value="An error occurred while saving the question. Please try again."}},B=()=>{Object.assign(a,{image_url:null,question_packet_id:null,subtopic_list_id:null,question_number:null,scenario:"",question:"",option_a:"",option_b:"",option_c:"",option_d:"",option_e:"",correct_answer:"",image_url:"",discussion:"",is_active:0})},P=async()=>{try{const s=await N.get("https://gateway.berkompeten.com/api/admin/master/question-packet/fetch",{headers:{Authorization:`Bearer ${_}`}});n.value=s.data.data.map(o=>({id:o.id,name:o.name}))}catch(s){console.error("Error fetching question packet options:",s)}},S=async()=>{try{const s=await N.get("https://gateway.berkompeten.com/api/admin/master/subtopic/fetch",{headers:{Authorization:`Bearer ${_}`}});c.value=s.data.data.map(o=>({id:o.id,name:o.subtopic}))}catch(s){console.error("Error fetching sub topic options:",s)}},y=async()=>{try{var s="https://gateway.berkompeten.com/api/admin/master/question/next-number";a.question_packet_id&&(s=s+"?question_packet_id="+a.question_packet_id);const o=await N.get(s,{headers:{Authorization:`Bearer ${_}`}});a.question_number=o.data.data.next_number,console.log("next number: ",a.question_number)}catch(o){console.error("Error fetching next number:",o)}},q=async s=>{const o=s.target.files[0],l=new FormData;l.append("image",o);try{const v=await N.post("https://gateway.berkompeten.com/api/admin/master/upload-image",l,{headers:{Authorization:`Bearer ${_}`,"Content-Type":"multipart/form-data"}});a.image_url=v.data.data.image_url}catch(v){console.error("Error uploading image:",v)}},$=()=>{a.image_url=""};return M(()=>a.question_packet_id,(s,o)=>{console.log(`question_packet_id changed from ${o} to ${s}`),s&&y()}),ie(()=>{p&&F(p),P(),S()}),(s,o)=>(G(),X(se,null,{default:r(()=>[t(f,{cols:"12"},{default:r(()=>[t(vt,{title:"Question Details"},{default:r(()=>[t(le,{class:"d-flex"},{default:r(()=>[t(Vt,{rounded:"lg",size:"100",class:"me-6",image:U.value},null,8,["image"]),O("form",Et,[O("div",Rt,[t(j,{color:"#0080ff",onClick:o[0]||(o[0]=l=>{var v;return(v=z(A))==null?void 0:v.click()})},{default:r(()=>[t(K,{icon:"ri-upload-cloud-line",class:"d-sm-none"}),Dt]),_:1}),O("input",{ref_key:"refInputEl",ref:A,type:"file",name:"file",accept:".jpeg,.png,.jpg,GIF",hidden:"",onInput:q},null,544),t(j,{type:"reset",color:"error",variant:"outlined",onClick:$},{default:r(()=>[Tt,t(K,{icon:"ri-refresh-line",class:"d-sm-none"})]),_:1})]),Ut,i.image_url?(G(),pe("div",$t,[O("span",zt,oe(i.image_url[0]),1)])):Q("",!0)])]),_:1}),t(bt),t(le,null,{default:r(()=>[t(gt,{onSubmit:ft(C,["prevent"])},{default:r(()=>[t(se,null,{default:r(()=>[t(f,{cols:"12"},{default:r(()=>[t(ye,{modelValue:a.question_packet_id,"onUpdate:modelValue":o[1]||(o[1]=l=>a.question_packet_id=l),"error-messages":i.question_packet_id,label:"Question Packet",items:z(n),placeholder:"Select question packet","item-value":"id","item-title":"name"},null,8,["modelValue","error-messages","items"])]),_:1}),t(f,{cols:"12"},{default:r(()=>[t(ye,{modelValue:a.subtopic_list_id,"onUpdate:modelValue":o[2]||(o[2]=l=>a.subtopic_list_id=l),"error-messages":i.subtopic_list_id,label:"Sub Topic List",items:z(c),placeholder:"Select Sub Topic List","item-value":"id","item-title":"name"},null,8,["modelValue","error-messages","items"])]),_:1}),t(f,{cols:"12"},{default:r(()=>[t(T,{modelValue:a.question_number,"onUpdate:modelValue":o[3]||(o[3]=l=>a.question_number=l),"error-messages":i.question_number,label:"Question Number",readonly:""},null,8,["modelValue","error-messages"])]),_:1}),t(f,{cols:"12"},{default:r(()=>[t(T,{modelValue:a.scenario,"onUpdate:modelValue":o[4]||(o[4]=l=>a.scenario=l),"error-messages":i.scenario,label:"Scenario"},null,8,["modelValue","error-messages"])]),_:1}),t(f,{cols:"12"},{default:r(()=>[t(he,{modelValue:a.question,"onUpdate:modelValue":o[5]||(o[5]=l=>a.question=l),"error-messages":i.question,label:"Question",placeholder:"Enter question"},null,8,["modelValue","error-messages"])]),_:1}),t(f,{cols:"12"},{default:r(()=>[t(T,{modelValue:a.option_a,"onUpdate:modelValue":o[6]||(o[6]=l=>a.option_a=l),"error-messages":i.option_a,label:"Option A",placeholder:"Enter option A"},null,8,["modelValue","error-messages"])]),_:1}),t(f,{cols:"12"},{default:r(()=>[t(T,{modelValue:a.option_b,"onUpdate:modelValue":o[7]||(o[7]=l=>a.option_b=l),"error-messages":i.option_b,label:"Option B",placeholder:"Enter option B"},null,8,["modelValue","error-messages"])]),_:1}),t(f,{cols:"12"},{default:r(()=>[t(T,{modelValue:a.option_c,"onUpdate:modelValue":o[8]||(o[8]=l=>a.option_c=l),"error-messages":i.option_c,label:"Option C",placeholder:"Enter option C"},null,8,["modelValue","error-messages"])]),_:1}),t(f,{cols:"12"},{default:r(()=>[t(T,{modelValue:a.option_d,"onUpdate:modelValue":o[9]||(o[9]=l=>a.option_d=l),"error-messages":i.option_d,label:"Option D",placeholder:"Enter option D"},null,8,["modelValue","error-messages"])]),_:1}),t(f,{cols:"12"},{default:r(()=>[t(T,{modelValue:a.option_e,"onUpdate:modelValue":o[10]||(o[10]=l=>a.option_e=l),"error-messages":i.option_e,label:"Option E",placeholder:"Enter option E"},null,8,["modelValue","error-messages"])]),_:1}),t(f,{cols:"12"},{default:r(()=>[t(T,{modelValue:a.correct_answer,"onUpdate:modelValue":o[11]||(o[11]=l=>a.correct_answer=l),"error-messages":i.correct_answer,label:"Correct Answer",placeholder:"Enter correct answer"},null,8,["modelValue","error-messages"])]),_:1}),t(f,{cols:"12"},{default:r(()=>[t(he,{modelValue:a.discussion,"onUpdate:modelValue":o[12]||(o[12]=l=>a.discussion=l),"error-messages":i.discussion,label:"Discussion",placeholder:"Enter discussion"},null,8,["modelValue","error-messages"])]),_:1}),t(f,{cols:"12"},{default:r(()=>[t(At,{color:"#0080ff",modelValue:a.is_active,"onUpdate:modelValue":o[13]||(o[13]=l=>a.is_active=l),"error-messages":i.is_active,label:"Is Active"},null,8,["modelValue","error-messages"]),i.image_url?(G(),pe("div",Nt)):Q("",!0)]),_:1}),t(f,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:r(()=>[t(j,{type:"submit",color:"#0080ff"},{default:r(()=>[J("Save")]),_:1}),t(j,{onClick:B,color:"secondary",variant:"outlined"},{default:r(()=>[J("Reset")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(le,null,{default:r(()=>[z(b)?(G(),X(be,{key:0,type:"success",dismissible:"","onClick:close":o[14]||(o[14]=l=>b.value="")},{default:r(()=>[J(oe(z(b)),1)]),_:1})):Q("",!0),z(h)?(G(),X(be,{key:1,type:"error",dismissible:"","onClick:close":o[15]||(o[15]=l=>h.value="")},{default:r(()=>[J(oe(z(h)),1)]),_:1})):Q("",!0)]),_:1})]),_:1})]),_:1})]),_:1}))}},ta={__name:"question-detail",setup(e){const w=localStorage.getItem("token"),p=V(null),n=we();return ie(async()=>{if(w)try{const c=await N.get("https://gateway.berkompeten.com/api/admin/profile",{headers:{Authorization:`Bearer ${w}`}});p.value=c.data}catch(c){c.response&&c.response.status===401&&n.push("/login")}else n.push("/login")}),(c,a)=>(G(),X(se,{class:"match-height"},{default:r(()=>[t(f,{cols:"12",md:"12"},{default:r(()=>[t(Ot)]),_:1})]),_:1}))}};export{ta as default};

import{a as g}from"./VGrid-CSSzMaaB.js";import{u as b,g as n,h as B,o as s,f as d,w as t,d as a,aJ as o,aR as C,aK as c,aV as S,b as R,c as m,t as V}from"./index-B5nBLcgW.js";import{V as h}from"./VCol-05f2kP35.js";import{V as T,b as I,a as k,c as M}from"./VTextField-DxK0UCgj.js";import{V as y}from"./VRow-Kjp9ojPd.js";import"./forwardRefs-C3oh-94J.js";import"./VImg-C1Lhj3zD.js";const N={key:1,class:"mt-2 text-success"},O={key:2,class:"mt-2 text-danger",style:{color:"#ff5252"}},$={__name:"OtpVerification",setup(x){const u=b(),r=n(!1),p=n(""),i=n(""),l=n(""),f=localStorage.getItem("token");B(async()=>{try{const e=await g.get("https://gateway.berkompeten.com/api/student/change-password/status",{headers:{Authorization:`Bearer ${f}`}});r.value=e.data.data.otp_submitted}catch(e){console.log("err: ",e),e.response&&e.response.status===401&&(localStorage.removeItem("token"),localStorage.removeItem("profile"),u.push("/login"))}});const v=async()=>{try{const e=await g.post("https://gateway.berkompeten.com/api/student/otp-verification",{otp:l},{headers:{Authorization:`Bearer ${f}`}});console.log("resp otp: ",e),p.value=e.data.message,u.push("/profile/security")}catch(e){console.error("reset otp:",e),i.value=e.response.data.message}};return(e,_)=>(s(),d(y,null,{default:t(()=>[a(h,{cols:"12"},{default:t(()=>[a(T,{title:"Otp"},{default:t(()=>[a(I,null,{default:t(()=>[o(r)==!0?(s(),d(k,{key:0},{default:t(()=>[a(y,null,{default:t(()=>[a(h,{cols:"12",md:"6"},{default:t(()=>[a(M,{modelValue:o(l),"onUpdate:modelValue":_[0]||(_[0]=w=>C(l)?l.value=w:null),label:"OTP",autocomplete:"on",placeholder:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})):c("",!0),a(k,{class:"d-flex flex-wrap gap-4"},{default:t(()=>[o(r)==!0?(s(),d(S,{key:0,onClick:v},{default:t(()=>[R("Save changes")]),_:1})):c("",!0),o(p)?(s(),m("div",N,V(o(p)),1)):c("",!0),o(i)?(s(),m("div",O,V(o(i)),1)):c("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},P={__name:"otp",setup(x){return(u,r)=>(s(),m("div",null,[a($)]))}};export{P as default};

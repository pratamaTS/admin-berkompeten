import{u as B,M as D,ah as w,f as _,g as M,o as u,e as V,w as t,d as e,ai as P,c as E,J as b,a1 as x,b as f,H as g,t as A}from"./index-Bnt6dT6r.js";import{a as h}from"./VGrid-CZNTwZ2j.js";import{b as i,V as C,a as y}from"./VCardText-Ba2D8kAy.js";import{V as I}from"./VCard-CgeysUnj.js";import{V as N}from"./VForm-CoM8nfjs.js";import{V as m}from"./VTextField-DoJKPd35.js";import{V as O}from"./VSwitch-DwHUQgZC.js";import{V as S}from"./VAlert-CHtiTKfs.js";import"./VCardTitle-C2UUuCd1.js";import"./VAvatar-BgsCuBHO.js";import"./VImg-CAqqNOG3.js";import"./index-JlOO3Khi.js";import"./forwardRefs-uqd-5c1B.js";import"./VSelectionControl-XqO8QAQ-.js";const T={key:0,class:"text-red-500 text-sm"},j={__name:"MembershipDetailUpsert",setup(R){const d=B();D();const c=localStorage.getItem("id"),a=w({name:"",class:"",description:"",image_url:"",price:"",activation_period:0,is_active:0}),r=w({}),v=localStorage.getItem("token"),p=_(""),n=_("");_([]);const U=async l=>{try{const s=await h.get(`https://gateway.berkompeten.com/api/admin/master/membership/detail?id=${l}`,{headers:{Authorization:`Bearer ${v}`}});Object.assign(a,s.data.data)}catch(s){console.error("Error fetching membership data:",s)}},$=async()=>{try{a.is_active=a.is_active?1:0,await h({method:"post",url:"https://gateway.berkompeten.com/api/admin/master/membership/upsert",data:a,headers:{Authorization:`Bearer ${v}`}}),p.value="membership saved successfully!",setTimeout(()=>{k(),d.push("/membership-management")},2e3)}catch(l){console.error("Error submitting form:",l),l.response&&l.response.data?l.response.status===500?n.value=l.response.data.message||"An error occurred while saving. Please try again.":l.response.data.error?(Object.assign(r,l.response.data.message),console.log("ERROR: ",r)):n.value="An error occurred while saving. Please try again.":n.value="An error occurred while saving. Please try again."}},k=()=>{Object.assign(a,{name:"",class:"",description:"",image_url:"",price:"",activation_period:0,is_active:0})};return M(()=>{c?U(c):localStorage.removeItem("id")}),(l,s)=>(u(),V(y,null,{default:t(()=>[e(i,{cols:"12"},{default:t(()=>[e(I,{title:"Membership Details"},{default:t(()=>[e(C,null,{default:t(()=>[e(N,{onSubmit:P($,["prevent"])},{default:t(()=>[e(y,null,{default:t(()=>[e(i,{cols:"12"},{default:t(()=>[e(m,{modelValue:a.name,"onUpdate:modelValue":s[0]||(s[0]=o=>a.name=o),"error-messages":r.name,label:"Name"},null,8,["modelValue","error-messages"])]),_:1}),e(i,{cols:"12"},{default:t(()=>[e(m,{modelValue:a.class,"onUpdate:modelValue":s[1]||(s[1]=o=>a.class=o),"error-messages":r.class,label:"Class"},null,8,["modelValue","error-messages"])]),_:1}),e(i,{cols:"12"},{default:t(()=>[e(m,{modelValue:a.description,"onUpdate:modelValue":s[2]||(s[2]=o=>a.description=o),"error-messages":r.description,label:"Description"},null,8,["modelValue","error-messages"])]),_:1}),e(i,{cols:"12"},{default:t(()=>[e(m,{modelValue:a.price,"onUpdate:modelValue":s[3]||(s[3]=o=>a.price=o),"error-messages":r.price,label:"Price",type:"number"},null,8,["modelValue","error-messages"])]),_:1}),e(i,{cols:"12"},{default:t(()=>[e(m,{modelValue:a.activation_period,"onUpdate:modelValue":s[4]||(s[4]=o=>a.activation_period=o),"error-messages":r.activation_period,label:"Activation Period",type:"number"},null,8,["modelValue","error-messages"])]),_:1}),e(i,{cols:"12"},{default:t(()=>[e(O,{color:"#0080ff",modelValue:a.is_active,"onUpdate:modelValue":s[5]||(s[5]=o=>a.is_active=o),"error-messages":r.is_active,label:"Is Active"},null,8,["modelValue","error-messages"]),r.image_url?(u(),E("div",T)):b("",!0)]),_:1}),e(i,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:t(()=>[e(x,{type:"submit",color:"#0080ff"},{default:t(()=>[f("Save")]),_:1}),e(x,{onClick:k,color:"secondary",variant:"outlined"},{default:t(()=>[f("Reset")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(C,null,{default:t(()=>[g(p)?(u(),V(S,{key:0,type:"success",dismissible:"","onClick:close":s[6]||(s[6]=o=>p.value="")},{default:t(()=>[f(A(g(p)),1)]),_:1})):b("",!0),g(n)?(u(),V(S,{key:1,type:"error",dismissible:"","onClick:close":s[7]||(s[7]=o=>n.value="")},{default:t(()=>[f(A(g(n)),1)]),_:1})):b("",!0)]),_:1})]),_:1})]),_:1})]),_:1}))}},se={__name:"membership-detail",setup(R){const d=localStorage.getItem("token"),c=_(null),a=B();return M(async()=>{if(d)try{const r=await h.get("https://gateway.berkompeten.com/api/admin/profile",{headers:{Authorization:`Bearer ${d}`}});c.value=r.data}catch(r){r.response&&r.response.status===401&&a.push("/login")}else a.push("/login")}),(r,v)=>(u(),V(y,{class:"match-height"},{default:t(()=>[e(i,{cols:"12",md:"12"},{default:t(()=>[e(j)]),_:1})]),_:1}))}};export{se as default};

import{u as B,M as D,ae as w,f as V,g as M,o as u,e as _,w as a,d as e,af as P,c as E,J as b,W as x,b as f,H as g,t as A}from"./index-C_ljhpMr.js";import{a as h}from"./VGrid-CSSzMaaB.js";import{b as i,a as C,V as m}from"./VTextField-C1SY7NTo.js";import{V as I}from"./VCard-Dn26e1XJ.js";import{V as N}from"./VForm-C0vL4gW6.js";import{V as y}from"./VRow-CoPn92vz.js";import{V as O}from"./VSwitch-2lkkh3hR.js";import{V as S}from"./VAlert-C-H8Yfrt.js";import"./forwardRefs-CwhYbBCS.js";import"./index-DUgFqvxH.js";import"./VAvatar-Dh_OLQB7.js";import"./VImg-DdVUcnW6.js";import"./VSelectionControl-B_iJVm6m.js";const T={key:0,class:"text-red-500 text-sm"},j={__name:"MembershipDetailUpsert",setup(R){const d=B();D();const c=localStorage.getItem("id"),t=w({name:"",class:"",description:"",image_url:"",price:"",activation_period:0,is_active:0}),r=w({}),v=localStorage.getItem("token"),p=V(""),n=V("");V([]);const U=async l=>{try{const s=await h.get(`https://gateway.berkompeten.com/api/admin/master/membership/detail?id=${l}`,{headers:{Authorization:`Bearer ${v}`}});Object.assign(t,s.data.data)}catch(s){console.error("Error fetching membership data:",s)}},$=async()=>{try{await h({method:"post",url:"https://gateway.berkompeten.com/api/admin/master/membership/upsert",data:t,headers:{Authorization:`Bearer ${v}`}}),p.value="membership saved successfully!",setTimeout(()=>{k(),d.push("/membership-management")},2e3)}catch(l){console.error("Error submitting form:",l),l.response&&l.response.data?l.response.status===500?n.value=l.response.data.message||"An error occurred while saving. Please try again.":l.response.data.error?(Object.assign(r,l.response.data.message),console.log("ERROR: ",r)):n.value="An error occurred while saving. Please try again.":n.value="An error occurred while saving. Please try again."}},k=()=>{Object.assign(t,{name:"",class:"",description:"",image_url:"",price:"",activation_period:0,is_active:0})};return M(()=>{c?U(c):localStorage.removeItem("id")}),(l,s)=>(u(),_(y,null,{default:a(()=>[e(i,{cols:"12"},{default:a(()=>[e(I,{title:"Membership Details"},{default:a(()=>[e(C,null,{default:a(()=>[e(N,{onSubmit:P($,["prevent"])},{default:a(()=>[e(y,null,{default:a(()=>[e(i,{cols:"12"},{default:a(()=>[e(m,{modelValue:t.name,"onUpdate:modelValue":s[0]||(s[0]=o=>t.name=o),"error-messages":r.name,label:"Name"},null,8,["modelValue","error-messages"])]),_:1}),e(i,{cols:"12"},{default:a(()=>[e(m,{modelValue:t.class,"onUpdate:modelValue":s[1]||(s[1]=o=>t.class=o),"error-messages":r.class,label:"Class"},null,8,["modelValue","error-messages"])]),_:1}),e(i,{cols:"12"},{default:a(()=>[e(m,{modelValue:t.description,"onUpdate:modelValue":s[2]||(s[2]=o=>t.description=o),"error-messages":r.description,label:"Description"},null,8,["modelValue","error-messages"])]),_:1}),e(i,{cols:"12"},{default:a(()=>[e(m,{modelValue:t.price,"onUpdate:modelValue":s[3]||(s[3]=o=>t.price=o),"error-messages":r.price,label:"Price",type:"number"},null,8,["modelValue","error-messages"])]),_:1}),e(i,{cols:"12"},{default:a(()=>[e(m,{modelValue:t.activation_period,"onUpdate:modelValue":s[4]||(s[4]=o=>t.activation_period=o),"error-messages":r.activation_period,label:"Activation Period",type:"number"},null,8,["modelValue","error-messages"])]),_:1}),e(i,{cols:"12"},{default:a(()=>[e(O,{color:"#0080ff",modelValue:t.is_active,"onUpdate:modelValue":s[5]||(s[5]=o=>t.is_active=o),"error-messages":r.is_active,label:"Is Active"},null,8,["modelValue","error-messages"]),r.image_url?(u(),E("div",T)):b("",!0)]),_:1}),e(i,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:a(()=>[e(x,{type:"submit",color:"#0080ff"},{default:a(()=>[f("Save")]),_:1}),e(x,{onClick:k,color:"secondary",variant:"outlined"},{default:a(()=>[f("Reset")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(C,null,{default:a(()=>[g(p)?(u(),_(S,{key:0,type:"success",dismissible:"","onClick:close":s[6]||(s[6]=o=>p.value="")},{default:a(()=>[f(A(g(p)),1)]),_:1})):b("",!0),g(n)?(u(),_(S,{key:1,type:"error",dismissible:"","onClick:close":s[7]||(s[7]=o=>n.value="")},{default:a(()=>[f(A(g(n)),1)]),_:1})):b("",!0)]),_:1})]),_:1})]),_:1})]),_:1}))}},ee={__name:"membership-detail",setup(R){const d=localStorage.getItem("token"),c=V(null),t=B();return M(async()=>{if(d)try{const r=await h.get("https://gateway.berkompeten.com/api/admin/profile",{headers:{Authorization:`Bearer ${d}`}});c.value=r.data}catch(r){r.response&&r.response.status===401&&t.push("/login")}else t.push("/login")}),(r,v)=>(u(),_(y,{class:"match-height"},{default:a(()=>[e(i,{cols:"12",md:"12"},{default:a(()=>[e(j)]),_:1})]),_:1}))}};export{ee as default};

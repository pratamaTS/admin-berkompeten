import{u as S,M as O,al as h,f as i,g as A,O as U,o as f,e as g,w as a,d as t,am as j,G as z,an as F,a1 as b,b as p,t as k,J as w}from"./index-C5ziKva2.js";import{a as _}from"./VGrid-CFdvUn7d.js";import{b as m,V as D,a as y}from"./VCardText-BiqvqMSV.js";import{V as N}from"./VCard-BYqX-GFx.js";import{V as G}from"./VForm-Dn5O9re2.js";import{V as H}from"./VDialog-Co_j1OmU.js";import{V as J}from"./VTextField-DHZIJ9_b.js";import{V as q}from"./VSwitch-DusG2fjZ.js";import{V as C}from"./VAlert-CNBLCkrK.js";import"./VCardTitle-B7fQF9dQ.js";import"./VAvatar-JpZsA3bH.js";import"./VImg-DFbSHlZx.js";import"./index-C_EKmf4r.js";import"./forwardRefs-BZndFGIh.js";import"./VOverlay-rJ40wDGt.js";import"./lazy-B47ofqp-.js";import"./VSelectionControl-DZAgXhUJ.js";const K={__name:"ExamDateDetailUpsert",setup($){const u=S();O();const d=localStorage.getItem("id"),o=h({date:"",is_active:!1}),r=h({}),v=localStorage.getItem("token"),c=i(""),n=i(""),V=i(!1),E=i(null),P=i(null),R=async s=>{try{const e=await _.get(`https://gateway.berkompeten.com/api/admin/master/exam-date/detail?id=${s}`,{headers:{Authorization:`Bearer ${v}`}});Object.assign(o,e.data.data)}catch(e){console.error("Error fetching exam date data:",e)}},T=async()=>{try{await _({method:"post",url:"https://gateway.berkompeten.com/api/admin/master/exam-date/upsert",data:o,headers:{Authorization:`Bearer ${v}`}}),c.value="Exam Date saved successfully!",setTimeout(()=>{x(),u.push("/exam-date-management")},2e3)}catch(s){console.error("Error submitting form:",s),s.response&&s.response.data?s.response.status===500?n.value=s.response.data.message||"An error occurred while saving. Please try again.":s.response.data.error?(Object.assign(r,s.response.data.message),console.log("ERROR: ",r)):n.value="An error occurred while saving. Please try again.":n.value="An error occurred while saving. Please try again."}},x=()=>{Object.assign(o,{date:"",is_active:!1}),E.value=null,P.value=null};return A(()=>{d?R(d):localStorage.removeItem("id")}),(s,e)=>{const B=U("VDateTimePicker");return f(),g(y,null,{default:a(()=>[t(m,{cols:"12"},{default:a(()=>[t(N,{title:"Exam Date Details"},{default:a(()=>[t(D,null,{default:a(()=>[t(G,{onSubmit:j(T,["prevent"])},{default:a(()=>[t(y,null,{default:a(()=>[t(m,{cols:"12"},{default:a(()=>[t(H,{modelValue:V.value,"onUpdate:modelValue":e[3]||(e[3]=l=>V.value=l),"max-width":"290px"},{activator:a(({on:l,attrs:I})=>[t(J,z({modelValue:o.date,"onUpdate:modelValue":e[0]||(e[0]=M=>o.date=M),label:"Date and Time",readonly:""},I,F(l),{"error-messages":r.date}),null,16,["modelValue","error-messages"])]),default:a(()=>[t(B,{modelValue:o.date,"onUpdate:modelValue":e[1]||(e[1]=l=>o.date=l),onInput:e[2]||(e[2]=l=>V.value=!1)},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),t(m,{cols:"12"},{default:a(()=>[t(q,{color:"#0080ff",modelValue:o.is_active,"onUpdate:modelValue":e[4]||(e[4]=l=>o.is_active=l),"error-messages":r.is_active,label:"Is Active"},null,8,["modelValue","error-messages"])]),_:1}),t(m,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:a(()=>[t(b,{type:"submit",color:"#0080ff"},{default:a(()=>[p("Save")]),_:1}),t(b,{onClick:x,color:"secondary",variant:"outlined"},{default:a(()=>[p("Reset")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(D,null,{default:a(()=>[c.value?(f(),g(C,{key:0,type:"success",dismissible:"","onClick:close":e[5]||(e[5]=l=>c.value="")},{default:a(()=>[p(k(c.value),1)]),_:1})):w("",!0),n.value?(f(),g(C,{key:1,type:"error",dismissible:"","onClick:close":e[6]||(e[6]=l=>n.value="")},{default:a(()=>[p(k(n.value),1)]),_:1})):w("",!0)]),_:1})]),_:1})]),_:1})]),_:1})}}},de={__name:"exam-date-detail",setup($){const u=localStorage.getItem("token"),d=i(null),o=S();return A(async()=>{if(u)try{const r=await _.get("https://gateway.berkompeten.com/api/admin/profile",{headers:{Authorization:`Bearer ${u}`}});d.value=r.data}catch(r){r.response&&r.response.status===401&&o.push("/login")}else o.push("/login")}),(r,v)=>(f(),g(y,{class:"match-height"},{default:a(()=>[t(m,{cols:"12",md:"12"},{default:a(()=>[t(K)]),_:1})]),_:1}))}};export{de as default};

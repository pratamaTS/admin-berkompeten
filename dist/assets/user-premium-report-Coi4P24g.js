import{_ as M,u as A,f as _,N as Q,g as R,O as z,o as m,e as h,w as e,d as t,b as l,am as S,t as r,J as C,a,c as G,F as q,a2 as H,Q as J,R as O}from"./index-DwE2IVd2.js";import{a as B}from"./VGrid-C1VKNHHc.js";import{V as N}from"./VCard-CLI6yKmX.js";import{V as L}from"./VCardTitle-D_a79x7D.js";import{V as T,a as k,b as x}from"./VCardText-oe1_Rorb.js";import{V as Y}from"./VForm-aZ5szffV.js";import{V as j}from"./VTextField-Bkose6zy.js";import{V as U}from"./VAlert-DG3HJJ1q.js";import{V as P,a as K}from"./VDataTable-DVwskdCn.js";import{V as W}from"./ssrBoot-DDpt5N7X.js";import{c as X,V as Z}from"./VList-D-Hg8IQH.js";import{V as ee}from"./VChip-DV0nk03R.js";import"./VAvatar-B01RajJA.js";import"./VImg-BpZTHdg2.js";import"./index-Cr1iZQaG.js";import"./forwardRefs-vkt9Au0U.js";import"./VSelect-DjfuKbl2.js";import"./VOverlay-BOT02BxP.js";import"./lazy-xoe-RaLQ.js";import"./VMenu-DlKE57Ji.js";import"./VCheckboxBtn-DDBEItnl.js";import"./VSelectionControl-DdSeQiZJ.js";import"./VTable-9mFqkpxy.js";import"./filter-BtkUbFLy.js";const s=f=>(J("data-v-b7069938"),f=f(),O(),f),te=["colspan"],ae=s(()=>a("strong",null,"Gender:",-1)),se=s(()=>a("br",null,null,-1)),oe=s(()=>a("strong",null,"Role:",-1)),le=s(()=>a("br",null,null,-1)),re=s(()=>a("strong",null,"Year of Entry:",-1)),ne=s(()=>a("br",null,null,-1)),ie=s(()=>a("strong",null,"Target Exam Date:",-1)),ue=s(()=>a("br",null,null,-1)),de=s(()=>a("strong",null,"University ID:",-1)),_e=s(()=>a("br",null,null,-1)),ce=s(()=>a("strong",null,"Educational Status ID:",-1)),pe=s(()=>a("strong",null,"Trial Packet Completion Date:",-1)),me=s(()=>a("br",null,null,-1)),fe=s(()=>a("strong",null,"Is User Trial:",-1)),he=s(()=>a("br",null,null,-1)),ge=s(()=>a("strong",null,"Is User Silver:",-1)),ve=s(()=>a("br",null,null,-1)),Ve=s(()=>a("strong",null,"Is User Gold:",-1)),xe=s(()=>a("h4",null,"Login Activities",-1)),be=s(()=>a("h4",null,"Student To-Do Lists",-1)),ke={__name:"UserPremiumReportList",setup(f){const g=A(),b=localStorage.getItem("token"),c=_(""),i=_([]),p=_(""),v=_(""),E=_([]),y=_({current_page:1,from:1,last_page:1,next_page_url:null,prev_page_url:null,total:0}),D=[{title:"ID",value:"id"},{title:"Name",value:"name"},{title:"Email",value:"email"},{title:"Phone Number",value:"phone_number"},{title:"Created At",value:"created_date"}],F=[{title:"ID",value:"id"},{title:"Question Packet Name",value:"question_packet.name"},{title:"Start Date",value:"start_date"},{title:"Finish Date",value:"finish_date"},{title:"Score",value:"score"},{title:"Is Done",value:"is_done"}],I=async(u=1,d="")=>{try{const n=await B.get("https://gateway.berkompeten.com/api/admin/report/user/premium",{headers:{Authorization:`Bearer ${b}`},params:{page:u,search:d.toLowerCase()}});if(n.data.error){p.value=n.data.message,i.value=[];return}v.value=n.data.message,i.value=n.data.data.data,y.value=n.data.data}catch(n){p.value="Failed to fetch user premium report. Please try again.",console.log("err: ",n),n.response&&n.response.status===401&&(localStorage.removeItem("token"),g.push("/login"))}};Q([c],([u])=>{I(y.value.current_page,u)});const w=u=>u?new Date(u).toLocaleDateString("en-US"):"N/A";return R(()=>{I()}),(u,d)=>{const n=z("v-list-item-content");return m(),h(K,null,{default:e(()=>[t(N,null,{default:e(()=>[t(L,null,{default:e(()=>[l("User Premium Report")]),_:1}),t(T,null,{default:e(()=>[t(Y,null,{default:e(()=>[t(k,null,{default:e(()=>[t(x,{cols:"12"},{default:e(()=>[t(j,{modelValue:c.value,"onUpdate:modelValue":d[0]||(d[0]=o=>c.value=o),label:"Search",class:"mx-3",solo:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),t(T,null,{default:e(()=>[p.value?(m(),h(U,{key:0,type:"error",dismissible:"",onClick:d[1]||(d[1]=S(o=>p.value="",["stop"]))},{default:e(()=>[l(r(p.value),1)]),_:1})):C("",!0),v.value?(m(),h(U,{key:1,type:"success",dismissible:"",onClick:d[2]||(d[2]=S(o=>v.value="",["stop"]))},{default:e(()=>[l(r(v.value),1)]),_:1})):C("",!0),t(P,{headers:D,items:i.value,"item-value":"id",class:"elevation-1","show-expand":"",expanded:E.value,"single-expand":u.singleExpand},{"expanded-row":e(({item:o})=>[a("td",{colspan:D.length,class:"expanded-row"},[t(N,{flat:"",class:"pa-3"},{default:e(()=>[t(L,null,{default:e(()=>[l("Additional Details for "+r(o.name),1)]),_:2},1024),t(k,null,{default:e(()=>[t(x,{cols:"12",sm:"6"},{default:e(()=>[ae,l(" "+r(o.gender),1),se,oe,l(" "+r(o.role),1),le,re,l(" "+r(o.year_of_entry),1),ne,ie,l(" "+r(w(o.target_exam_date)),1),ue,de,l(" "+r(o.university_id),1),_e,ce,l(" "+r(o.educational_status_id),1)]),_:2},1024),t(x,{cols:"12",sm:"6"},{default:e(()=>[pe,l(" "+r(w(o.trial_packet_completion_date)),1),me,fe,l(" "+r(o.is_user_trial),1),he,ge,l(" "+r(o.is_user_silver),1),ve,Ve,l(" "+r(o.is_user_gold),1)]),_:2},1024)]),_:2},1024),t(W,{class:"my-3"}),xe,t(X,{dense:""},{default:e(()=>[(m(!0),G(q,null,H(o.login_activities,(V,$)=>(m(),h(Z,{key:$},{default:e(()=>[t(n,null,{default:e(()=>[l(r(V),1)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024),be,t(P,{headers:F,items:o.student_to_do_lists,"item-value":"id",class:"elevation-1","hide-default-footer":!0,"items-per-page":5},{"item.is_done":e(({item:V})=>[t(ee,{color:V.is_done?"success":"error",dark:""},{default:e(()=>[l(r(V.is_done?"Done":"Not Done"),1)]),_:2},1032,["color"])]),_:2},1032,["items"])]),_:2},1024)],8,te)]),_:1},8,["items","expanded","single-expand"])]),_:1})]),_:1})]),_:1})}}},ye=M(ke,[["__scopeId","data-v-b7069938"]]),Ye={__name:"user-premium-report",setup(f){const g=localStorage.getItem("token"),b=_(null),c=A();return R(async()=>{if(g)try{const i=await B.get("https://gateway.berkompeten.com/api/admin/profile",{headers:{Authorization:`Bearer ${g}`}});b.value=i.data}catch(i){i.response&&i.response.status===401&&c.push("/login")}else c.push("/login")}),(i,p)=>(m(),h(k,{class:"match-height"},{default:e(()=>[t(x,{cols:"12",md:"12"},{default:e(()=>[t(ye)]),_:1})]),_:1}))}};export{Ye as default};

import{_ as M,h as A,r as _,P as Q,i as R,Q as z,o as m,f as h,w as e,d as t,b as l,am as w,t as r,L as C,a as s,c as G,F as j,j as q,R as H,S as Y}from"./index-AryBdys7.js";import{a as B}from"./VGrid-H4nAnDsn.js";import{V as L}from"./VCard-DRv5nRi-.js";import{V as N}from"./VCardTitle-gQEIOlk7.js";import{V as P,a as k,b as x}from"./VCardText-Ccz8IcNf.js";import{V as J}from"./VForm-2GwK3Akv.js";import{V as K}from"./VTextField-ZuzApsZG.js";import{V as T}from"./VAlert-Dclja9nK.js";import{V as U,a as O}from"./VDataTable-D_b2Lhdj.js";import{V as W}from"./ssrBoot-P8F_o1ED.js";import{d as X,V as Z}from"./VMenu-CwDODdxf.js";import{V as ee}from"./VChip-0NNzlpK8.js";import"./VAvatar-Bk7bSWw5.js";import"./VImg-BnnpGyml.js";import"./index-DYhDWbac.js";import"./VInput-0JT9cSES.js";import"./forwardRefs-BgKS6qNZ.js";import"./easing-DY7PVvcf.js";import"./VSelect-kxivoCMj.js";import"./VOverlay-souyEm7B.js";import"./lazy-IcXCMn0l.js";import"./VCheckboxBtn-CNvXUyKk.js";import"./VSelectionControl-COivTBzk.js";import"./VTable-ClaSuRDA.js";import"./filter-DHuJU8EQ.js";const a=f=>(H("data-v-b7069938"),f=f(),Y(),f),te=["colspan"],se=a(()=>s("strong",null,"Gender:",-1)),ae=a(()=>s("br",null,null,-1)),oe=a(()=>s("strong",null,"Role:",-1)),le=a(()=>s("br",null,null,-1)),re=a(()=>s("strong",null,"Year of Entry:",-1)),ne=a(()=>s("br",null,null,-1)),ie=a(()=>s("strong",null,"Target Exam Date:",-1)),ue=a(()=>s("br",null,null,-1)),de=a(()=>s("strong",null,"University ID:",-1)),_e=a(()=>s("br",null,null,-1)),ce=a(()=>s("strong",null,"Educational Status ID:",-1)),pe=a(()=>s("strong",null,"Trial Packet Completion Date:",-1)),me=a(()=>s("br",null,null,-1)),fe=a(()=>s("strong",null,"Is User Trial:",-1)),he=a(()=>s("br",null,null,-1)),ge=a(()=>s("strong",null,"Is User Silver:",-1)),ve=a(()=>s("br",null,null,-1)),Ve=a(()=>s("strong",null,"Is User Gold:",-1)),xe=a(()=>s("h4",null,"Login Activities",-1)),be=a(()=>s("h4",null,"Student To-Do Lists",-1)),ke={__name:"UserPremiumReportList",setup(f){const g=A(),b=localStorage.getItem("token"),c=_(""),i=_([]),p=_(""),v=_(""),E=_([]),y=_({current_page:1,from:1,last_page:1,next_page_url:null,prev_page_url:null,total:0}),D=[{title:"ID",value:"id"},{title:"Name",value:"name"},{title:"Email",value:"email"},{title:"Phone Number",value:"phone_number"},{title:"Created At",value:"created_date"}],F=[{title:"ID",value:"id"},{title:"Question Packet Name",value:"question_packet.name"},{title:"Start Date",value:"start_date"},{title:"Finish Date",value:"finish_date"},{title:"Score",value:"score"},{title:"Is Done",value:"is_done"}],I=async(u=1,d="")=>{try{const n=await B.get("https://gateway.berkompeten.com/api/admin/report/user/premium",{headers:{Authorization:`Bearer ${b}`},params:{page:u,search:d.toLowerCase()}});if(n.data.error){p.value=n.data.message,i.value=[];return}v.value=n.data.message,i.value=n.data.data.data,y.value=n.data.data}catch(n){p.value="Failed to fetch user premium report. Please try again.",console.log("err: ",n),n.response&&n.response.status===401&&(localStorage.removeItem("token"),g.push("/login"))}};Q([c],([u])=>{I(y.value.current_page,u)});const S=u=>u?new Date(u).toLocaleDateString("en-US"):"N/A";return R(()=>{I()}),(u,d)=>{const n=z("v-list-item-content");return m(),h(O,null,{default:e(()=>[t(L,null,{default:e(()=>[t(N,null,{default:e(()=>[l("User Premium Report")]),_:1}),t(P,null,{default:e(()=>[t(J,null,{default:e(()=>[t(k,null,{default:e(()=>[t(x,{cols:"12"},{default:e(()=>[t(K,{modelValue:c.value,"onUpdate:modelValue":d[0]||(d[0]=o=>c.value=o),label:"Search",class:"mx-3",solo:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),t(P,null,{default:e(()=>[p.value?(m(),h(T,{key:0,type:"error",dismissible:"",onClick:d[1]||(d[1]=w(o=>p.value="",["stop"]))},{default:e(()=>[l(r(p.value),1)]),_:1})):C("",!0),v.value?(m(),h(T,{key:1,type:"success",dismissible:"",onClick:d[2]||(d[2]=w(o=>v.value="",["stop"]))},{default:e(()=>[l(r(v.value),1)]),_:1})):C("",!0),t(U,{headers:D,items:i.value,"item-value":"id",class:"elevation-1","show-expand":"",expanded:E.value,"single-expand":u.singleExpand},{"expanded-row":e(({item:o})=>[s("td",{colspan:D.length,class:"expanded-row"},[t(L,{flat:"",class:"pa-3"},{default:e(()=>[t(N,null,{default:e(()=>[l("Additional Details for "+r(o.name),1)]),_:2},1024),t(k,null,{default:e(()=>[t(x,{cols:"12",sm:"6"},{default:e(()=>[se,l(" "+r(o.gender),1),ae,oe,l(" "+r(o.role),1),le,re,l(" "+r(o.year_of_entry),1),ne,ie,l(" "+r(S(o.target_exam_date)),1),ue,de,l(" "+r(o.university_id),1),_e,ce,l(" "+r(o.educational_status_id),1)]),_:2},1024),t(x,{cols:"12",sm:"6"},{default:e(()=>[pe,l(" "+r(S(o.trial_packet_completion_date)),1),me,fe,l(" "+r(o.is_user_trial),1),he,ge,l(" "+r(o.is_user_silver),1),ve,Ve,l(" "+r(o.is_user_gold),1)]),_:2},1024)]),_:2},1024),t(W,{class:"my-3"}),xe,t(X,{dense:""},{default:e(()=>[(m(!0),G(j,null,q(o.login_activities,(V,$)=>(m(),h(Z,{key:$},{default:e(()=>[t(n,null,{default:e(()=>[l(r(V),1)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024),be,t(U,{headers:F,items:o.student_to_do_lists,"item-value":"id",class:"elevation-1","hide-default-footer":!0,"items-per-page":5},{"item.is_done":e(({item:V})=>[t(ee,{color:V.is_done?"success":"error",dark:""},{default:e(()=>[l(r(V.is_done?"Done":"Not Done"),1)]),_:2},1032,["color"])]),_:2},1032,["items"])]),_:2},1024)],8,te)]),_:1},8,["items","expanded","single-expand"])]),_:1})]),_:1})]),_:1})}}},ye=M(ke,[["__scopeId","data-v-b7069938"]]),Ke={__name:"user-premium-report",setup(f){const g=localStorage.getItem("token"),b=_(null),c=A();return R(async()=>{if(g)try{const i=await B.get("https://gateway.berkompeten.com/api/admin/profile",{headers:{Authorization:`Bearer ${g}`}});b.value=i.data}catch(i){i.response&&i.response.status===401&&c.push("/login")}else c.push("/login")}),(i,p)=>(m(),h(k,{class:"match-height"},{default:e(()=>[t(x,{cols:"12",md:"12"},{default:e(()=>[t(ye)]),_:1})]),_:1}))}};export{Ke as default};

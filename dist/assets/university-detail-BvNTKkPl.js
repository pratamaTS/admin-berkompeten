import{h as C,O as I,al as b,r as f,i as R,o as g,f as v,w as e,d as t,am as O,a2 as w,b as d,u as p,t as k,L as x}from"./index-VbzBk9vn.js";import{a as y}from"./VGrid-BFbnRpDQ.js";import{b as n,V as S,a as h}from"./VCardText-DndgDA8g.js";import{V as T}from"./VCard-CN-ZFMdA.js";import{V as U}from"./VForm-D0Ul6rtS.js";import{V as E}from"./VTextField-D6neXmBY.js";import{V as M}from"./VSwitch-CnMLxXKH.js";import{V as A}from"./VAlert-BRuRmKCM.js";import"./VCardTitle-BkplJ9oX.js";import"./VAvatar-Q-zZ1Ylg.js";import"./VImg-BZwaYVCB.js";import"./index--BNXqmfu.js";import"./forwardRefs-DfCWc5Ip.js";import"./VSelectionControl-bJ4Y4K4n.js";const N={__name:"UniversityDetailUpsert",setup($){const u=C();I();const m=localStorage.getItem("id"),r=b({name:"",is_active:0}),o=b({}),_=localStorage.getItem("token"),c=f(""),i=f("");f([]);const B=async s=>{try{const a=await y.get(`https://gateway.berkompeten.com/api/admin/master/university/detail?id=${s}`,{headers:{Authorization:`Bearer ${_}`}});Object.assign(r,a.data.data)}catch(a){console.error("Error fetching university data:",a)}},D=async()=>{try{await y({method:"post",url:"https://gateway.berkompeten.com/api/admin/master/university/upsert",data:r,headers:{Authorization:`Bearer ${_}`}}),c.value="Topic saved successfully!",setTimeout(()=>{V(),u.push("/university-management")},2e3)}catch(s){console.error("Error submitting form:",s),s.response&&s.response.data?s.response.status===500?i.value=s.response.data.message||"An error occurred while saving. Please try again.":s.response.data.error?(Object.assign(o,s.response.data.message),console.log("ERROR: ",o)):i.value="An error occurred while saving. Please try again.":i.value="An error occurred while saving. Please try again."}},V=()=>{Object.assign(r,{name:"",is_active:0})};return R(()=>{m?B(m):localStorage.removeItem("id")}),(s,a)=>(g(),v(h,null,{default:e(()=>[t(n,{cols:"12"},{default:e(()=>[t(T,{title:"University Details"},{default:e(()=>[t(S,null,{default:e(()=>[t(U,{onSubmit:O(D,["prevent"])},{default:e(()=>[t(h,null,{default:e(()=>[t(n,{cols:"12"},{default:e(()=>[t(E,{modelValue:r.name,"onUpdate:modelValue":a[0]||(a[0]=l=>r.name=l),"error-messages":o.name,label:"Name"},null,8,["modelValue","error-messages"])]),_:1}),t(n,{cols:"12"},{default:e(()=>[t(M,{color:"#0080ff",modelValue:r.is_active,"onUpdate:modelValue":a[1]||(a[1]=l=>r.is_active=l),"error-messages":o.is_active,label:"Is Active"},null,8,["modelValue","error-messages"])]),_:1}),t(n,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:e(()=>[t(w,{type:"submit",color:"#0080ff"},{default:e(()=>[d("Save")]),_:1}),t(w,{onClick:V,color:"secondary",variant:"outlined"},{default:e(()=>[d("Reset")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(S,null,{default:e(()=>[p(c)?(g(),v(A,{key:0,type:"success",dismissible:"","onClick:close":a[2]||(a[2]=l=>c.value="")},{default:e(()=>[d(k(p(c)),1)]),_:1})):x("",!0),p(i)?(g(),v(A,{key:1,type:"error",dismissible:"","onClick:close":a[3]||(a[3]=l=>i.value="")},{default:e(()=>[d(k(p(i)),1)]),_:1})):x("",!0)]),_:1})]),_:1})]),_:1})]),_:1}))}},Z={__name:"university-detail",setup($){const u=localStorage.getItem("token"),m=f(null),r=C();return R(async()=>{if(u)try{const o=await y.get("https://gateway.berkompeten.com/api/admin/profile",{headers:{Authorization:`Bearer ${u}`}});m.value=o.data}catch(o){o.response&&o.response.status===401&&r.push("/login")}else r.push("/login")}),(o,_)=>(g(),v(h,{class:"match-height"},{default:e(()=>[t(n,{cols:"12",md:"12"},{default:e(()=>[t(N)]),_:1})]),_:1}))}};export{Z as default};

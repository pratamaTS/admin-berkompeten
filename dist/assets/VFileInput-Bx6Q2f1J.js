import{m as ne,V as oe,u as ue,a as N}from"./VOverlay-B5BpDoey.js";import{f as L}from"./forwardRefs-D6ALbEPu.js";import{p as U,q as j,a3 as q,f as w,a4 as ie,O as E,$ as H,a0 as p,H as I,C as W,d as r,a5 as re,a6 as se,a7 as ce,y as de,a8 as O,a9 as fe,F as B,aa as ve}from"./index-D1re5I1B.js";import{m as me,a as pe,u as ge,b as T,f as ye,c as Ve,d as he}from"./VTextField-Cv1i6yQN.js";import{V as Ce}from"./VChip-DcElRL4Y.js";const be=U({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...ne({origin:"center center",scrollStrategy:"block",transition:{component:oe},zIndex:2400})},"VDialog"),Be=j()({name:"VDialog",props:be(),emits:{"update:modelValue":e=>!0},setup(e,y){let{slots:V}=y;const d=q(e,"modelValue"),{scopeId:n}=ue(),o=w();function a(s){var c,f;const u=s.relatedTarget,i=s.target;if(u!==i&&((c=o.value)!=null&&c.contentEl)&&((f=o.value)!=null&&f.globalTop)&&![document,o.value.contentEl].includes(i)&&!o.value.contentEl.contains(i)){const v=se(o.value.contentEl);if(!v.length)return;const S=v[0],k=v[v.length-1];u===S?k.focus():S.focus()}}ie&&E(()=>d.value&&e.retainFocus,s=>{s?document.addEventListener("focusin",a):document.removeEventListener("focusin",a)},{immediate:!0}),E(d,async s=>{var u,i;await H(),s?(u=o.value.contentEl)==null||u.focus({preventScroll:!0}):(i=o.value.activatorEl)==null||i.focus({preventScroll:!0})});const h=p(()=>I({"aria-haspopup":"dialog","aria-expanded":String(d.value)},e.activatorProps));return W(()=>{const s=N.filterProps(e);return r(N,I({ref:o,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},s,{modelValue:d.value,"onUpdate:modelValue":u=>d.value=u,"aria-modal":"true",activatorProps:h.value,role:"dialog"},n),{activator:V.activator,default:function(){for(var u=arguments.length,i=new Array(u),c=0;c<u;c++)i[c]=arguments[c];return r(re,{root:"VDialog"},{default:()=>{var f;return[(f=V.default)==null?void 0:f.call(V,...i)]}})}})}),L({},o)}}),Pe=U({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},multiple:Boolean,showSize:{type:[Boolean,Number],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(e)},...me({prependIcon:"$file"}),modelValue:{type:Array,default:()=>[],validator:e=>ce(e).every(y=>y!=null&&typeof y=="object")},...pe({clearable:!0})},"VFileInput"),Ee=j()({name:"VFileInput",inheritAttrs:!1,props:Pe(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,y){let{attrs:V,emit:d,slots:n}=y;const{t:o}=de(),a=q(e,"modelValue"),{isFocused:h,focus:s,blur:u}=ge(e),i=p(()=>typeof e.showSize!="boolean"?e.showSize:void 0),c=p(()=>(a.value??[]).reduce((t,l)=>{let{size:C=0}=l;return t+C},0)),f=p(()=>O(c.value,i.value)),v=p(()=>(a.value??[]).map(t=>{const{name:l="",size:C=0}=t;return e.showSize?`${l} (${O(C,i.value)})`:l})),S=p(()=>{var l;const t=((l=a.value)==null?void 0:l.length)??0;return e.showSize?o(e.counterSizeString,t,f.value):o(e.counterString,t)}),k=w(),R=w(),g=w(),G=p(()=>h.value||e.active),A=p(()=>["plain","underlined"].includes(e.variant));function z(){var t;g.value!==document.activeElement&&((t=g.value)==null||t.focus()),h.value||s()}function J(t){D(t)}function K(t){d("mousedown:control",t)}function D(t){var l;(l=g.value)==null||l.click(),d("click:control",t)}function Q(t){t.stopPropagation(),z(),H(()=>{a.value=[],ve(e["onClick:clear"],t)})}return E(a,t=>{(!Array.isArray(t)||!t.length)&&g.value&&(g.value.value="")}),W(()=>{const t=!!(n.counter||e.counter),l=!!(t||n.details),[C,X]=fe(V),{modelValue:Ie,...Y}=T.filterProps(e),Z=ye(e);return r(T,I({ref:k,modelValue:a.value,"onUpdate:modelValue":b=>a.value=b,class:["v-file-input",{"v-file-input--chips":!!e.chips,"v-input--plain-underlined":A.value},e.class],style:e.style,"onClick:prepend":J},C,Y,{centerAffix:!A.value,focused:h.value}),{...n,default:b=>{let{id:F,isDisabled:P,isDirty:$,isReadonly:x,isValid:_}=b;return r(Ve,I({ref:R,"prepend-icon":e.prependIcon,onMousedown:K,onClick:D,"onClick:clear":Q,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},Z,{id:F.value,active:G.value||$.value,dirty:$.value,disabled:P.value,focused:h.value,error:_.value===!1}),{...n,default:ee=>{var M;let{props:{class:te,...ae}}=ee;return r(B,null,[r("input",I({ref:g,type:"file",readonly:x.value,disabled:P.value,multiple:e.multiple,name:e.name,onClick:m=>{m.stopPropagation(),x.value&&m.preventDefault(),z()},onChange:m=>{if(!m.target)return;const le=m.target;a.value=[...le.files??[]]},onFocus:z,onBlur:u},ae,X),null),r("div",{class:te},[!!((M=a.value)!=null&&M.length)&&(n.selection?n.selection({fileNames:v.value,totalBytes:c.value,totalBytesReadable:f.value}):e.chips?v.value.map(m=>r(Ce,{key:m,size:"small",color:e.color},{default:()=>[m]})):v.value.join(", "))])])}})},details:l?b=>{var F,P;return r(B,null,[(F=n.details)==null?void 0:F.call(n,b),t&&r(B,null,[r("span",null,null),r(he,{active:!!((P=a.value)!=null&&P.length),value:S.value},n.counter)])])}:void 0})}),L({},k,R,g)}});export{Ee as V,Be as a};
